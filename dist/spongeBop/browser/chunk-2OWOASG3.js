import{a as M}from"./chunk-XGWRDNEP.js";import{a as ye}from"./chunk-2UY5NHNZ.js";import{a as he,b as R,c as x,d as L,e as O,i as fe,j,k as be,l as U,m as B,n as Ce,o as xe,p as ve,q as G,r as k,s as q,t as N}from"./chunk-JSVRATKM.js";import{B as f,C as b,Da as r,Ea as y,Fa as oe,Ga as le,Ha as ae,Ia as se,Ka as h,La as ce,O as s,Q as d,Qa as J,R as S,S as ie,W as v,Ya as A,Za as me,a as K,aa as E,b as Q,ba as w,ca as ne,da as re,db as C,e as X,ea as m,fa as i,ga as t,gb as de,ha as g,la as W,lb as ge,ma as z,nb as pe,oa as F,ob as V,qa as u,qb as ue,rb as I,sa as p,w as Z,x as ee,ya as Y,z as te}from"./chunk-VXVQNLGX.js";var we=X(ye());var Te=()=>["/dashboard"],Ae=()=>["/dashboard/users"],Ve=()=>["/dashboard/EditeRoles"],Me=()=>["/dashboard/challenges"],Re=()=>["/dashboard/challenges/Addchallenge"],Le=()=>["/dashboard/challenges/challengeCategoires"],Oe=o=>["/dashboard/challenges/Addchallenge",o];function je(o,e){if(o&1){let n=F();i(0,"tr",20)(1,"td",21),r(2),t(),i(3,"td",16)(4,"span",22),r(5),t()(),i(6,"td",16),r(7),t(),i(8,"td",16)(9,"span",23),r(10),t()(),i(11,"td",24)(12,"button",25),r(13,"Edit"),t(),i(14,"button",26),u("click",function(){let a=f(n).$implicit,c=p();return b(c.Delete(a.id))}),r(15,"Delete"),t()()()}if(o&2){let n=e.$implicit;s(2),y(n.title),s(3),y(n.difficulty),s(2),y(n.points),s(3),y(n.isVasible),s(2),m("routerLink",ce(5,Oe,n.id))}}var $=class o{constructor(e,n){this.challengeServices=e;this.toastServices=n}challenges;ngOnInit(){this.challengeServices.Get().subscribe({next:e=>{this.challenges=e},error:e=>{console.log(e)}})}Delete(e){we.default.fire({title:"Are you sure?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(n=>{n.isConfirmed&&this.challengeServices.delete(e).subscribe(()=>{this.challenges=this.challenges.filter(l=>l.id!=e),this.toastServices.show("User deleted successfully!","success")})})}static \u0275fac=function(n){return new(n||o)(d(M),d(N))};static \u0275cmp=S({type:o,selectors:[["app-challenges"]],decls:40,vars:13,consts:[[1,"min-h-screen","flex","bg-[#1f1f1f]","text-white","font-sans"],[1,"w-64","bg-[#252525]","p-6","shadow-lg","border-r","border-gray-700"],[1,"text-2xl","font-bold","mb-8"],[1,"space-y-4"],[1,"block","py-2","px-4","rounded-lg","hover:bg-green-600","transition",3,"routerLink"],[1,"flex-1","p-6","overflow-auto"],[1,"flex","flex-col","sm:flex-row","sm:justify-between","sm:items-center","gap-4","mb-6"],[1,"text-3xl","font-bold"],[1,"flex","gap-3"],[1,"bg-green-600","hover:bg-green-500","text-white","px-4","py-2","rounded-lg","shadow","transition","flex","items-center","gap-2",3,"routerLink"],[1,"lucide","lucide-plus"],[1,"bg-blue-600","hover:bg-blue-500","text-white","px-4","py-2","rounded-lg","shadow","transition","flex","items-center","gap-2",3,"routerLink"],[1,"lucide","lucide-layers"],[1,"bg-[#2c2c2c]","rounded-xl","border","border-gray-700","shadow","p-4","overflow-auto"],[1,"w-full","table-auto","text-left","text-sm"],[1,"border-b","border-gray-600","text-gray-300","uppercase","tracking-wider"],[1,"p-3"],[1,"p-3","text-right"],[1,"text-white"],["class","hover:bg-[#3a3a3a] border-b border-gray-700 transition",4,"ngFor","ngForOf"],[1,"hover:bg-[#3a3a3a]","border-b","border-gray-700","transition"],[1,"p-3","font-medium"],[1,"text-yellow-400","font-semibold"],[1,"text-green-400","font-semibold"],[1,"p-3","text-right","space-x-2"],[1,"text-blue-400","hover:underline",3,"routerLink"],[1,"text-red-500","hover:underline",3,"click"]],template:function(n,l){n&1&&(i(0,"div",0)(1,"aside",1)(2,"h2",2),r(3,"\u{1F6E0} Admin"),t(),i(4,"nav",3)(5,"a",4),r(6,"Dashboard"),t(),i(7,"a",4),r(8,"Users"),t(),i(9,"a",4),r(10,"Roles"),t(),i(11,"a",4),r(12,"Challenges"),t()()(),i(13,"main",5)(14,"header",6)(15,"h1",7),r(16,"\u2694\uFE0F Challenges"),t(),i(17,"div",8)(18,"button",9),g(19,"i",10),r(20," Add Challenge "),t(),i(21,"button",11),g(22,"i",12),r(23," Challenge Categories "),t()()(),i(24,"section",13)(25,"table",14)(26,"thead")(27,"tr",15)(28,"th",16),r(29,"Title"),t(),i(30,"th",16),r(31,"Difficulty"),t(),i(32,"th",16),r(33,"Points"),t(),i(34,"th",16),r(35,"Visible"),t(),i(36,"th",17),r(37,"Actions"),t()()(),i(38,"tbody",18),v(39,je,16,7,"tr",19),t()()()()()),n&2&&(s(5),m("routerLink",h(7,Te)),s(2),m("routerLink",h(8,Ae)),s(2),m("routerLink",h(9,Ve)),s(2),m("routerLink",h(10,Me)),s(7),m("routerLink",h(11,Re)),s(3),m("routerLink",h(12,Le)),s(18),m("ngForOf",l.challenges))},dependencies:[V,k,C,A],encapsulation:2})};var D=class o{constructor(e){this.http=e}Get(){return this.http.get(`${I.baseUrl}/Category`)}GetById(e){return this.http.get(`${I.baseUrl}/Category/${e}`)}Update(e){return this.http.put(`${I.baseUrl}/Category`,e)}Delete(e){return this.http.delete(`${I.baseUrl}/Category/${e}`)}Add(e){return this.http.post(`${I.baseUrl}/Category`,e)}static \u0275fac=function(n){return new(n||o)(te(de))};static \u0275prov=Z({token:o,factory:o.\u0275fac,providedIn:"root"})};var Be=()=>["/dashboard"],Ge=()=>["/dashboard/users"],qe=()=>["/dashboard/EditeRoles"],$e=()=>["/dashboard/challenges"];function He(o,e){o&1&&(i(0,"div",13),r(1," this field is required "),t())}function Pe(o,e){o&1&&(i(0,"div",13),r(1," this field is required "),t())}function We(o,e){if(o&1&&(i(0,"option",35),r(1),t()),o&2){let n=e.$implicit;m("value",n.id),s(),y(n.name)}}function ze(o,e){o&1&&(i(0,"div",13),r(1," this field is required "),t())}var T=class o{constructor(e,n,l,a,c,_){this.categoryServices=e;this.challengeServices=n;this.toastrServices=l;this.router=a;this.fb=c;this.activatedRouter=_;this.challengeForm=c.group({title:["",x.required],flag:["",x.required],categoryId:["",x.required],description:["",x.required],points:["",x.required],isVasible:[""],challengeUrl:[""],difficulty:[""]})}challenge;challengeForm;categories;challengeId;coverFile=null;attFile=null;ngOnInit(){this.activatedRouter.paramMap.subscribe(e=>{let n=e.get("id");n&&(this.challengeId=+n,this.challengeServices.Getbyid(this.challengeId).subscribe({next:l=>{this.challengeForm.patchValue(l)},error:l=>console.log(l)}))}),this.categoryServices.Get().subscribe({next:e=>this.categories=e,error:e=>console.log(e)})}Add(){this.challengeId?(this.challenge=this.challengeForm.value,this.attFile&&(this.challenge.attachmetFile=this.attFile),this.coverFile&&(this.challenge.coverImg=this.coverFile),this.challenge.id=this.challengeId,this.challengeServices.Update(this.challenge).subscribe({next:e=>{this.router.navigateByUrl("/dashboard/challenges"),this.toastrServices.show("Updated happen succesfully","success")},error:e=>{console.log(e)}})):(this.challenge=this.challengeForm.value,this.attFile&&(this.challenge.attachmetFile=this.attFile),this.coverFile&&(this.challenge.coverImg=this.coverFile),this.challengeServices.Add(this.challenge).subscribe({next:e=>{this.router.navigateByUrl("/dashboard/challenges"),this.toastrServices.show("challenge Added succesfully","success")},error:e=>{let n=e.error?.error||"somthing went wrong";console.log(e)}}))}onCoverSelected(e){let n=e.target;n.files&&n.files[0]&&(this.coverFile=n.files[0])}onAttchmentSelected(e){let n=e.target;n.files&&n.files[0]&&(this.attFile=n.files[0])}static \u0275fac=function(n){return new(n||o)(d(D),d(M),d(N),d(pe),d(G),d(ge))};static \u0275cmp=S({type:o,selectors:[["app-challenge"]],decls:76,vars:14,consts:[[1,"min-h-screen","flex","bg-[#1f1f1f]","text-white","font-sans"],[1,"w-64","bg-[#252525]","p-6","shadow-lg","border-r","border-gray-700"],[1,"text-2xl","font-bold","mb-8"],[1,"space-y-4"],[1,"block","py-2","px-4","rounded-lg","hover:bg-green-600","transition",3,"routerLink"],[1,"block","py-2","px-4","rounded-lg","bg-green-700",3,"routerLink"],[1,"flex-1","p-6","overflow-auto"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-3xl","font-bold"],[1,"bg-[#2c2c2c]","p-6","rounded-xl","border","border-gray-700","shadow","max-w-4xl","mx-auto"],[1,"space-y-6",3,"submit","formGroup"],[1,"block","mb-1","text-sm","font-medium"],["type","text","name","title","formControlName","title",1,"w-full","bg-[#1f1f1f]","border","border-gray-600","rounded-lg","px-4","py-2","focus:outline-none","focus:ring-2","focus:ring-green-500"],[1,"mt-2","p-3","rounded-md","bg-red-600/10","text-red-400","border","border-red-500","text-sm"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["type","number","name","points","formControlName","points",1,"w-full","bg-[#1f1f1f]","border","border-gray-600","rounded-lg","px-4","py-2"],["name","categoryId","formControlName","categoryId",1,"w-full","bg-[#1f1f1f]","border","border-gray-600","rounded-lg","px-4","py-2"],[3,"value",4,"ngFor","ngForOf"],["formControlName","difficulty","name","difficulty",1,"w-full","bg-[#1f1f1f]","border","border-gray-600","rounded-lg","px-4","py-2"],["value","Easy"],["value","Medium"],["value","Hard"],["type","text","name","flag","formControlName","flag",1,"w-full","bg-[#1f1f1f]","border","border-gray-600","rounded-lg","px-4","py-2"],["type","file",1,"block","w-full","text-sm","text-gray-400","bg-[#1f1f1f]","border","border-gray-600","rounded-lg","cursor-pointer",3,"change"],["type","url","placeholder","https://example.com","name","challengeUrl","formControlName","challengeUrl",1,"w-full","bg-[#1f1f1f]","border","border-gray-600","rounded-lg","px-4","py-2"],[1,"flex","items-center","space-x-3"],[1,"text-sm","font-medium"],["type","checkbox","name","isVasible","formControlName","isVasible",1,"w-5","h-5","bg-[#1f1f1f]","border","border-gray-600","rounded"],[1,"mb-6"],["for","editorjs",1,"block","text-sm","font-semibold","text-gray-300","mb-2"],["id","editorjs",1,"bg-[#2a2a2a]","border","border-gray-700","rounded-xl","p-4","shadow-inner","min-h-[250px]"],["name","description","formControlName","description","rows","6","placeholder","Describe the challenge here ...",1,"w-full","bg-transparent","text-white","placeholder-gray-500","focus:outline-none","resize-none"],[1,"flex","justify-end"],["type","submit",1,"flex","items-center","gap-2","bg-green-600","hover:bg-green-500","text-white","px-6","py-2","rounded-lg","shadow",3,"disabled"],[1,"lucide","lucide-save"],[3,"value"]],template:function(n,l){if(n&1&&(i(0,"div",0)(1,"aside",1)(2,"h2",2),r(3,"\u{1F6E0} Admin"),t(),i(4,"nav",3)(5,"a",4),r(6,"Dashboard"),t(),i(7,"a",4),r(8,"Users"),t(),i(9,"a",4),r(10,"Roles"),t(),i(11,"a",5),r(12,"Challenges"),t()()(),i(13,"main",6)(14,"header",7)(15,"h1",8),r(16,"Add Challenge"),t()(),i(17,"section",9)(18,"form",10),u("submit",function(){return l.Add()}),i(19,"div")(20,"label",11),r(21,"Title"),t(),g(22,"input",12),E(23,He,2,0,"div",13),t(),i(24,"div",14)(25,"div")(26,"label",11),r(27,"Points"),t(),g(28,"input",15),E(29,Pe,2,0,"div",13),t(),i(30,"div")(31,"label",11),r(32,"Category"),t(),i(33,"select",16),v(34,We,2,2,"option",17),t()(),i(35,"div")(36,"label",11),r(37,"Difficulty"),t(),i(38,"select",18)(39,"option",19),r(40,"Easy"),t(),i(41,"option",20),r(42,"Medium"),t(),i(43,"option",21),r(44,"Hard"),t()()()(),i(45,"div")(46,"label",11),r(47,"Flag"),t(),g(48,"input",22),E(49,ze,2,0,"div",13),t(),i(50,"div",14)(51,"div")(52,"label",11),r(53,"Challenge Image"),t(),i(54,"input",23),u("change",function(c){return l.onCoverSelected(c)}),t()(),i(55,"div")(56,"label",11),r(57,"Attachment (zip/pdf)"),t(),i(58,"input",23),u("change",function(c){return l.onAttchmentSelected(c)}),t()(),i(59,"div")(60,"label",11),r(61,"Challenge URL (optional)"),t(),g(62,"input",24),t()(),i(63,"div",25)(64,"label",26),r(65,"Visible"),t(),g(66,"input",27),t(),i(67,"div",28)(68,"label",29),r(69," \u{1F4DD} Description "),t(),i(70,"div",30),g(71,"textarea",31),t()(),i(72,"div",32)(73,"button",33),g(74,"i",34),r(75," Save Challenge "),t()()()()()()),n&2){let a,c,_;s(5),m("routerLink",h(10,Be)),s(2),m("routerLink",h(11,Ge)),s(2),m("routerLink",h(12,qe)),s(2),m("routerLink",h(13,$e)),s(7),m("formGroup",l.challengeForm),s(5),w(!((a=l.challengeForm.get("title"))==null||a.errors==null)&&a.errors.required&&((a=l.challengeForm.get("title"))!=null&&a.touched)?23:-1),s(6),w(!((c=l.challengeForm.get("points"))==null||c.errors==null)&&c.errors.required&&((c=l.challengeForm.get("points"))!=null&&c.touched)?29:-1),s(5),m("ngForOf",l.categories),s(15),w(!((_=l.challengeForm.get("flag"))==null||_.errors==null)&&_.errors.required&&((_=l.challengeForm.get("flag"))!=null&&_.touched)?49:-1),s(24),m("disabled",l.challengeForm.invalid)}},dependencies:[V,k,j,xe,ve,R,be,he,Ce,L,O,q,U,B,C,A],encapsulation:2})};var Ie=X(ye());var Ye=(o,e)=>e.id;function Je(o,e){o&1&&(i(0,"div",17),r(1," this field is required "),t())}function Ke(o,e){if(o&1){let n=F();W(0),i(1,"input",27),se("ngModelChange",function(a){f(n);let c=p(2);return ae(c.updatedCategoryName,a)||(c.updatedCategoryName=a),b(a)}),t(),z()}if(o&2){let n=p(2);s(),le("ngModel",n.updatedCategoryName)}}function Qe(o,e){if(o&1&&r(0),o&2){let n=p().$implicit;oe(" ",n.name," ")}}function Xe(o,e){if(o&1){let n=F();W(0),i(1,"button",28),u("click",function(){f(n);let a=p().$implicit,c=p();return b(c.saveEdit(a))}),r(2,"Save"),t(),i(3,"button",29),u("click",function(){f(n);let a=p(2);return b(a.cancelEdit())}),r(4,"Cancel"),t(),z()}}function Ze(o,e){if(o&1){let n=F();i(0,"button",30),u("click",function(){f(n);let a=p().$implicit,c=p();return b(c.startEdit(a))}),r(1,"Edit"),t(),i(2,"button",31),u("click",function(){f(n);let a=p().$implicit,c=p();return b(c.Delete(a.id))}),r(3,"Delete"),t()}}function et(o,e){if(o&1&&(i(0,"tr",23)(1,"td",24),v(2,Ke,2,1,"ng-container",25)(3,Qe,1,1,"ng-template",null,0,J),t(),i(5,"td",26),v(6,Xe,5,0,"ng-container",25)(7,Ze,4,0,"ng-template",null,1,J),t()()),o&2){let n=e.$implicit,l=Y(4),a=Y(8),c=p();s(2),m("ngIf",c.catId===n.id)("ngIfElse",l),s(4),m("ngIf",c.catId===n.id)("ngIfElse",a)}}var P=class o{constructor(e,n,l){this.categoryServices=e;this.toastrServices=n;this.fb=l;this.catFrom=l.group({name:["",x.required]})}categories;category;catFrom;catId;updatedCategoryName;ngOnInit(){this.categoryServices.Get().subscribe({next:e=>this.categories=e,error:e=>console.log(e)})}AddCategory(){this.category=this.catFrom.value,this.categoryServices.Add(this.category).subscribe({next:e=>{this.toastrServices.show("category added succesfully","success"),this.categories.push(e)},error:e=>{let n=e.error?.err||"somthing went wrong";this.toastrServices.show(n,"error")}})}Edite(e){}Delete(e){Ie.default.fire({title:"Are you sure?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(n=>{this.categoryServices.Delete(e).subscribe({next:l=>{this.toastrServices.show("Delete role happen succesfully","success"),this.categories=this.categories.filter(a=>a.id!=e)},error:l=>{let a=l.error?.error||"somthing went wrong";this.toastrServices.show(a,"error")}})})}startEdit(e){this.catId=e.id,this.updatedCategoryName=e.name}saveEdit(e){let n=Q(K({},e),{name:this.updatedCategoryName});this.categoryServices.Update(n).subscribe({next:l=>{e.name=l.name,this.toastrServices.show("Category updated successfully","success"),this.catId=null},error:l=>{let a=l.error?.error||"Update failed";this.toastrServices.show(a,"error")}})}cancelEdit(){this.catId=null}static \u0275fac=function(n){return new(n||o)(d(D),d(N),d(G))};static \u0275cmp=S({type:o,selectors:[["app-challenge-categories"]],decls:38,vars:2,consts:[["showName",""],["normalActions",""],[1,"min-h-screen","flex","bg-[#1f1f1f]","text-white","font-sans"],[1,"w-64","bg-[#252525]","p-6","shadow-lg","border-r","border-gray-700"],[1,"text-2xl","font-bold","mb-8"],[1,"space-y-4"],["href","#",1,"block","py-2","px-4","rounded-lg","hover:bg-green-600","transition"],[1,"flex-1","p-6","overflow-auto"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-3xl","font-bold"],[1,"bg-green-600","hover:bg-green-500","text-white","px-4","py-2","rounded-lg","shadow","transition","flex","items-center","gap-2"],[1,"lucide","lucide-plus"],[1,"bg-[#2c2c2c]","border","border-gray-700","rounded-xl","p-6","mb-6"],[3,"submit","formGroup"],[1,"flex","flex-col","sm:flex-row","gap-4","items-center"],["type","text","name","name","formControlName","name","placeholder","Category Name",1,"bg-[#1f1f1f]","border","border-gray-600","rounded-lg","px-4","py-2","w-full","focus:outline-none"],["type","submit",1,"bg-green-600","hover:bg-green-500","px-6","py-2","rounded-lg","text-white","shadow","transition"],[1,"mt-2","p-3","rounded-md","bg-red-600/10","text-red-400","border","border-red-500","text-sm"],[1,"bg-[#2c2c2c]","rounded-xl","border","border-gray-700","shadow","p-4"],[1,"w-full","table-auto","text-left","text-sm"],[1,"border-b","border-gray-600","text-gray-300","uppercase","tracking-wider"],[1,"p-3"],[1,"p-3","text-right"],[1,"hover:bg-[#3a3a3a]","border-b","border-gray-700","transition"],[1,"p-3","font-medium"],[4,"ngIf","ngIfElse"],[1,"p-3","text-right","space-x-3"],["name","categoryName",1,"bg-[#2c2c2c]","text-white","border","border-gray-700","px-2","py-1","rounded","w-full","focus:outline-none","focus:ring","focus:ring-green-500",3,"ngModelChange","ngModel"],[1,"text-green-400","hover:underline",3,"click"],[1,"text-yellow-400","hover:underline",3,"click"],[1,"text-blue-400","hover:underline",3,"click"],[1,"text-red-500","hover:underline",3,"click"]],template:function(n,l){if(n&1&&(i(0,"div",2)(1,"aside",3)(2,"h2",4),r(3,"\u{1F6E0} Admin"),t(),i(4,"nav",5)(5,"a",6),r(6,"Dashboard"),t(),i(7,"a",6),r(8,"Users"),t(),i(9,"a",6),r(10,"Roles"),t(),i(11,"a",6),r(12,"Challenges"),t()()(),i(13,"main",7)(14,"header",8)(15,"h1",9),r(16,"\u{1F3AF} Challenge Categories"),t(),i(17,"button",10),g(18,"i",11),r(19," New Category "),t()(),i(20,"div",12)(21,"form",13),u("submit",function(){return l.AddCategory()}),i(22,"div",14),g(23,"input",15),i(24,"button",16),r(25," Add "),t()(),E(26,Je,2,0,"div",17),t()(),i(27,"section",18)(28,"table",19)(29,"thead")(30,"tr",20)(31,"th",21),r(32,"Category Name"),t(),i(33,"th",22),r(34,"Actions"),t()()(),i(35,"tbody"),ne(36,et,9,4,"tr",23,Ye),t()()()()()),n&2){let a;s(21),m("formGroup",l.catFrom),s(5),w(!((a=l.catFrom.get("name"))==null||a.errors==null)&&a.errors.required&&((a=l.catFrom.get("name"))!=null&&a.touched)?26:-1),s(10),re(l.categories)}},dependencies:[C,me,q,j,R,L,O,U,B,k,fe],encapsulation:2})};var tt=[{path:"",component:$},{path:"Addchallenge",component:T},{path:"Addchallenge/:id",component:T},{path:"challengeCategoires",component:P}],ke=ue.forChild(tt);var Ne=class o{static \u0275fac=function(n){return new(n||o)};static \u0275mod=ie({type:o});static \u0275inj=ee({imports:[C,ke]})};export{Ne as ChallengesModule};
