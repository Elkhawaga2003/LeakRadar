import{a as Pt}from"./chunk-XGWRDNEP.js";import{a as xt}from"./chunk-L75IDH64.js";import{a as fr,b as ft,c as Xe,d as ht,e as mt,f as An,g as hr,h as Pe,i as mr,j as gt,l as Pn,m as Dn,r as gr,s as Dt,t as Ce}from"./chunk-JSVRATKM.js";import{$ as Vi,$a as nr,A as ct,Aa as Re,B as L,Ba as Xi,C as F,Ca as he,Da as b,Ea as V,Fa as Q,G as Fi,Ga as Qi,Ha as Yi,Ia as Zi,Ja as Rn,K as qe,Ka as Ke,L as Oe,La as pt,M as ye,Ma as ut,N as ue,Na as M,O as f,Oa as I,Q as S,R as O,Ra as er,S as Mn,U as Bi,W as T,X as Hi,Xa as be,Ya as Ae,Za as U,_a as tr,a as P,aa as In,ab as _e,b as K,ba as Tn,c as Ii,cb as ir,db as H,ea as h,eb as rr,f as ne,fa as x,fb as or,g as Ti,ga as w,h as Rt,ha as N,hb as sr,i as Ni,ia as ie,ib as lr,ja as re,jb as ar,k as Cn,kb as cr,l as kn,la as de,lb as pr,m as Oi,ma as fe,mb as ur,na as $i,nb as Ge,oa as Z,ob as At,p as Ri,pa as Nn,pb as dr,q as Sn,qa as D,r as Ai,ra as On,rb as dt,s as Pi,sa as y,t as Di,ta as ji,ua as Wi,va as Ji,w as Ue,wa as Ui,x as En,xa as qi,y as zi,ya as Ki,z as Li,za as Gi}from"./chunk-VXVQNLGX.js";var as=i=>["/challenge",i];function cs(i,t){if(i&1&&(x(0,"div",4),N(1,"img",5),x(2,"div",6)(3,"h3",7),b(4),w(),x(5,"p",8),b(6," \u{1F3AF} Difficulty: "),x(7,"span",9),b(8),w()(),x(9,"p",8),b(10," \u{1F3C6} Points: "),x(11,"span",9),b(12),w()(),x(13,"a",10),b(14," View Challenge \u2192 "),w()()()),i&2){let e=t.$implicit;f(),h("src",e.imgUrl||"/assets/challenge-placeholder.png",ye),f(3),Q(" ",e.title||"Untitled Challenge"," "),f(4),V(e.difficulty),f(4),V(e.points),f(),h("routerLink",pt(5,as,e.id))}}var wt=class i{constructor(t){this.challengeServics=t}challenges;ngOnInit(){this.challengeServics.Get().subscribe({next:t=>{this.challenges=t.map(e=>K(P({},e),{imgUrl:`${dt.baseUrl}/${e.imgUrl}`}))},error:t=>console.log(t)})}static \u0275fac=function(e){return new(e||i)(S(Pt))};static \u0275cmp=O({type:i,selectors:[["app-home"]],decls:5,vars:1,consts:[[1,"w-screen","min-h-screen","bg-[#121212]","text-white","p-6","font-mono"],[1,"text-4xl","font-extrabold","mb-8","text-[#00ffcc]","border-b-2","border-[#00ffcc]","pb-2","font-sans"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-8"],["class","bg-[#1a1a1a] rounded-xl overflow-hidden shadow-lg border border-[#2a2a2a] hover:shadow-[#00ffcc44] transition-all",4,"ngFor","ngForOf"],[1,"bg-[#1a1a1a]","rounded-xl","overflow-hidden","shadow-lg","border","border-[#2a2a2a]","hover:shadow-[#00ffcc44]","transition-all"],["alt","challenge",1,"w-full","h-48","object-cover","border-b","border-[#333]",3,"src"],[1,"p-5","space-y-2"],[1,"text-xl","font-bold","text-[#00ffcc]","truncate"],[1,"text-sm","text-gray-400"],[1,"text-white","font-semibold"],[1,"inline-block","mt-3","text-[#00ffcc]","hover:underline","text-sm",3,"routerLink"]],template:function(e,n){e&1&&(x(0,"div",0)(1,"h2",1),b(2," \u{1F9E9} Available CTF Challenges "),w(),x(3,"div",2),T(4,cs,15,7,"div",3),w()()),e&2&&(f(4),h("ngForOf",n.challenges))},dependencies:[H,Ae,At],encapsulation:2})};var Lt=class i{constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=O({type:i,selectors:[["app-notfound"]],decls:10,vars:0,consts:[[1,"bg-black","min-h-screen","flex","flex-col","items-center","justify-center","px-4","text-center","text-white","space-y-6"],[1,"text-[8rem]","font-extrabold","tracking-widest","text-transparent","bg-clip-text","bg-gradient-to-br","from-purple-400","via-pink-500","to-red-500","drop-shadow-md"],[1,"text-2xl","font-light","text-gray-300"],[1,"bg-gradient-to-br","from-gray-800","to-gray-900","border","border-gray-700/50","rounded-xl","p-5","max-w-xl","w-full","shadow-lg","backdrop-blur-sm"],[1,"text-gray-400","italic"],[1,"block","mt-3","text-sm","text-gray-300","bg-gray-800","rounded","px-3","py-2","font-mono","break-all"]],template:function(e,n){e&1&&(ie(0,"div",0)(1,"h1",1),b(2," 404 "),re(),ie(3,"p",2),b(4,"Oops! The page you're looking for doesn\u2019t exist."),re(),ie(5,"div",3)(6,"p",4),b(7,"Be gentle \u2014 not everything needs to be found."),re(),ie(8,"code",5),b(9," Go For Ctfs only "),re()()())},styles:[".notfound-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:2rem;background-color:#f8f9fa;text-align:center;font-family:Segoe UI,sans-serif}.notfound-title[_ngcontent-%COMP%]{font-size:6rem;font-weight:700;color:#343a40;margin:0}.notfound-message[_ngcontent-%COMP%]{font-size:1.5rem;color:#6c757d;margin-bottom:2rem}.notfound-url-box[_ngcontent-%COMP%]{background:#fff;padding:1rem 1.5rem;border:1px solid #dee2e6;border-radius:8px;margin-bottom:1.5rem}.notfound-url-box[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{display:block;margin-top:.5rem;color:#495057}.notfound-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;justify-content:center;margin-bottom:2rem}.notfound-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem 1rem;width:300px;max-width:90%;border:1px solid #ced4da;border-radius:6px;font-size:1rem}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none;padding:.75rem 1.25rem;border-radius:6px;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;border:none;padding:.75rem 1.25rem;border-radius:6px;cursor:pointer}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:.75rem 1.25rem;border-radius:6px;cursor:pointer}button[_ngcontent-%COMP%]:hover{opacity:.9}"]})};function ds(i,t){if(i&1&&(x(0,"div",16),N(1,"img",17),w()),i&2){let e=y(2);f(),h("src",e.challenge.imgUrl,ye)}}function fs(i,t){if(i&1&&(x(0,"div",18)(1,"a",19),b(2," \u{1F310} Open Challenge "),w()()),i&2){let e=y(2);f(),h("href",e.challenge.challengeUrl,ye)}}function hs(i,t){if(i&1&&(x(0,"div",20)(1,"a",21),b(2," \u{1F4CE} Download Attachment "),w()()),i&2){let e=y(2);f(),h("href",e.challenge.attachmetUrl,ye)}}function ms(i,t){if(i&1&&(x(0,"p",22),b(1),w()),i&2){let e=y(2);f(),Q(" ",e.submitMessage," ")}}function gs(i,t){if(i&1){let e=Z();x(0,"div")(1,"h1",3),b(2),w(),x(3,"div",4)(4,"span"),b(5,"\u{1F3AF} Difficulty: "),x(6,"span",5),b(7),w()(),x(8,"span"),b(9,"\u{1F3C6} Points: "),x(10,"span",5),b(11),w()()(),T(12,ds,2,1,"div",6),x(13,"div",7),b(14),w(),T(15,fs,3,1,"div",8)(16,hs,3,1,"div",9),x(17,"div",10)(18,"h2",11),b(19,"Submit Flag"),w(),x(20,"form",12),D("ngSubmit",function(){L(e);let r=y();return F(r.submitFlag())}),x(21,"input",13),Zi("ngModelChange",function(r){L(e);let o=y();return Yi(o.submittedFlag,r)||(o.submittedFlag=r),F(r)}),w(),x(22,"button",14),b(23," \u{1F680} Submit "),w()(),T(24,ms,2,1,"p",15),w()()}if(i&2){let e=y();f(2),V(e.challenge.title),f(5),V(e.challenge.difficulty),f(4),V(e.challenge.points),f(),h("ngIf",e.challenge.imgUrl),f(2),Q(" ",e.challenge.description," "),f(),h("ngIf",e.challenge.challengeUrl),f(),h("ngIf",e.challenge.attachmetUrl),f(5),Qi("ngModel",e.submittedFlag),f(3),h("ngIf",e.submitMessage)}}var Ft=class i{constructor(t,e,n,r){this.activedRoute=t;this.challengeServices=e;this.toastrServices=n;this.router=r}submittedFlag;challenge;submitMessage=null;submitMessageTimeout;ngOnInit(){this.activedRoute.paramMap.subscribe(t=>{let e=t.get("id");e&&this.challengeServices.Getbyid(+e).subscribe({next:n=>{console.log(n),this.challenge=K(P({},n),{imgUrl:`${dt.baseUrl}/${n.imgUrl}`,attachmetUrl:n.attachmetUrl?`${dt.baseUrl}/${n.attachmetUrl}`:null})},error:n=>{console.error("Error fetching challenge:",n)}})})}submitFlag(){this.submittedFlag&&this.challengeServices.submitFlag(this.submittedFlag,this.challenge.id).subscribe({next:t=>{this.router.navigateByUrl("/loaderboard"),this.toastrServices.show("you flag is correct","success")},error:t=>{this.submitMessage=t.error.message||"Something went wrong.",this.autoClearMessage()}})}autoClearMessage(){clearTimeout(this.submitMessageTimeout),this.submitMessageTimeout=setTimeout(()=>{this.submitMessage=null},3e3)}static \u0275fac=function(e){return new(e||i)(S(pr),S(Pt),S(Ce),S(Ge))};static \u0275cmp=O({type:i,selectors:[["app-play-challenge"]],decls:3,vars:1,consts:[[1,"min-h-screen","bg-[#121212]","text-white","p-6","font-mono"],[1,"max-w-4xl","mx-auto","bg-[#1a1a1a]","rounded-xl","border","border-[#2a2a2a]","shadow-lg","p-8"],[4,"ngIf"],[1,"text-3xl","md:text-4xl","font-bold","text-[#00ffcc]","mb-4"],[1,"flex","flex-wrap","items-center","text-sm","text-gray-400","gap-4","mb-6"],[1,"text-white","font-semibold"],["class","mb-6",4,"ngIf"],[1,"text-base","leading-relaxed","text-gray-300","whitespace-pre-line"],["class","mt-6",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"mt-10"],[1,"text-xl","font-bold","text-[#00ffcc]","mb-2"],[1,"flex","flex-col","sm:flex-row","gap-3",3,"ngSubmit"],["type","text","name","flag","placeholder","Enter your flag...",1,"bg-[#222]","border","border-[#444]","text-white","px-4","py-2","rounded","w-full","sm:w-auto","flex-grow","focus:outline-none","focus:ring-2","focus:ring-[#00ffcc]",3,"ngModelChange","ngModel"],["type","submit",1,"bg-[#00ffcc]","text-black","font-semibold","px-4","py-2","rounded","hover:bg-[#00e6b8]","transition"],["class","mt-2 text-sm text-green-400",4,"ngIf"],[1,"mb-6"],["alt","Cover",1,"rounded-lg","w-full","max-h-72","object-cover","border","border-[#333]",3,"src"],[1,"mt-6"],["target","_blank",1,"inline-block","bg-[#00ffcc]","text-black","font-semibold","px-4","py-2","rounded","hover:bg-[#00e6b8]","transition",3,"href"],[1,"mt-4"],["download","",1,"inline-block","bg-[#1e90ff]","text-white","font-semibold","px-4","py-2","rounded","hover:bg-[#1c86ee]","transition",3,"href"],[1,"mt-2","text-sm","text-green-400"]],template:function(e,n){e&1&&(x(0,"div",0)(1,"div",1),T(2,gs,25,9,"div",2),w()()),e&2&&(f(2),h("ngIf",n.challenge))},dependencies:[H,U,gr,gt,ft,ht,mt,mr,hr],encapsulation:2})};var wr=[{path:"",component:wt},{path:"home",component:wt},{path:"dashboard",loadChildren:()=>import("./chunk-UDX2II3B.js").then(i=>i.DashboardModule)},{path:"auth",loadChildren:()=>import("./chunk-IDK3RNYV.js").then(i=>i.AuthModule)},{path:"writeups",loadChildren:()=>import("./chunk-O3TZFFTP.js").then(i=>i.WriteupModule)},{path:"loaderboard",loadChildren:()=>import("./chunk-TLFK7SYE.js").then(i=>i.LoaderBoardModule)},{path:"challenge/:id",component:Ft},{path:"**",component:Lt}];var Qe=class i{loadingSubject=new Rt(!1);loading$=this.loadingSubject.asObservable();requestCount=0;show(){this.requestCount++,this.loadingSubject.next(!0)}hide(){this.requestCount=Math.max(this.requestCount-1,0),this.requestCount===0&&setTimeout(()=>{this.loadingSubject.next(!1)},600)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"})};var Rp=new Rt(null);function vr(i,t){let e=ct(xt),n=ct(Ge),r=ct(Ce),o=ct(Qe),s=localStorage.getItem("token"),l=localStorage.getItem("RefreshToken");return s&&(i=i.clone({setHeaders:{Authorization:`Bearer ${s}`}})),o.show(),t(i).pipe(Pi(a=>{a instanceof or&&o.hide()}),Sn(a=>(o.hide(),a.status===401&&l?e.RefreshToken(l).pipe(Ai(c=>{e.setTokens(c.token,c.refreshToken);let p=i.clone({setHeaders:{Authorization:`Bearer ${c.token}`}});return t(p)}),Sn(c=>(console.error("Refresh Failed:",c),e.ClearTokens(),n.navigateByUrl("/home"),kn(()=>c)))):(a.status===401&&(r.show("You are not signed in yet","error"),n.navigateByUrl("/home")),kn(()=>a)))))}var yr={providers:[Fi(),er({eventCoalescing:!0}),dr(wr),sr(ar(),lr([vr]))]};var ws=()=>["/home"],vs=()=>["/loaderboard"],ys=()=>["/writeups"],bs=()=>["/dashboard"],_s=()=>["/auth"];function Cs(i,t){i&1&&(x(0,"li")(1,"a",7),b(2,"Dashboard"),w()()),i&2&&(f(),h("routerLink",Ke(1,bs)))}function ks(i,t){i&1&&(x(0,"li")(1,"a",7),b(2,"Login"),w()()),i&2&&(f(),h("routerLink",Ke(1,_s)))}function Ss(i,t){if(i&1){let e=Z();x(0,"li")(1,"a",8),D("click",function(){L(e);let r=y();return F(r.LogOut())}),b(2,"LogOut"),w()()}}var Bt=class i{constructor(t,e,n,r){this.userServices=t;this.router=e;this.toastrServices=n;this.authServivces=r}isLogged;isAdmin;ngOnInit(){var t=localStorage.getItem("token");if(t){var e=this.decodeToken(t);let n=e["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"];this.isAdmin=Array.isArray(n)&&n.includes("Admin")}this.userServices.isloggedIn$.subscribe(n=>{this.isLogged=n}),console.log("should print here"),console.log(this.isLogged)}LogOut(){let t=this.userServices.getRefreshToken();if(console.log(t),!t){this.userServices.ClearTokens(),this.router.navigate(["/Home"]);return}this.userServices.logOut(t).subscribe({next:e=>{let n=this.userServices.getRefreshToken();this.authServivces.logOut(n),this.userServices.ClearTokens(),this.router.navigate(["/home"]),this.toastrServices.show("log out successfully","success")},error:e=>{this.router.navigate(["/home"]),this.toastrServices.show("please try again ","warning")}})}decodeToken(t){let e=t.split(".")[1],n=atob(e);return JSON.parse(n)}static \u0275fac=function(e){return new(e||i)(S(xt),S(Ge),S(Ce),S(xt))};static \u0275cmp=O({type:i,selectors:[["app-sidebar"]],decls:20,vars:8,consts:[[1,"bg-black","text-green-400","font-mono","p-4","border-b","border-green-500","shadow-md","animate-fade-in-down","relative","overflow-hidden"],[1,"flex","justify-between","items-center","max-w-7xl","mx-auto"],[1,"text-2xl","font-bold","tracking-widest","animate-glitch"],[1,"relative","mx-6","w-[50px]","h-[40px]","overflow-visible"],["src","snipperMan.png","alt","Sniper",1,"absolute","left-0","bottom-0","w-[100px]","h-[60px]","object-contain","z-10","animate-sniper"],[1,"absolute","left-[30px]","top-[20px]","w-2","h-1","bg-green-400","animate-bullet"],[1,"flex","space-x-6"],[1,"hover:text-cyan-400","transition","duration-200",3,"routerLink"],[1,"hover:text-cyan-400","transition","duration-200",3,"click"]],template:function(e,n){e&1&&(x(0,"nav",0)(1,"div",1)(2,"h1",2),b(3," LeakRadar "),w(),x(4,"div",3),N(5,"img",4)(6,"div",5),w(),x(7,"ul",6),In(8,Cs,3,2,"li"),x(9,"li")(10,"a",7),b(11,"Home"),w()(),x(12,"li")(13,"a",7),b(14,"Leaderboard"),w()(),x(15,"li")(16,"a",7),b(17,"WriteUp's"),w()(),In(18,ks,3,2,"li")(19,Ss,3,0,"li"),w()()()),e&2&&(f(8),Tn(n.isAdmin?8:-1),f(2),h("routerLink",Ke(5,ws)),f(3),h("routerLink",Ke(6,vs)),f(3),h("routerLink",Ke(7,ys)),f(2),Tn(n.isLogged?19:18))},dependencies:[At],styles:["nav[_ngcontent-%COMP%]{box-shadow:0 0 20px #0ff}"]})};var Ht=class i{constructor(){}ngOnInit(){}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=O({type:i,selectors:[["app-footer"]],decls:6,vars:0,consts:[[1,"bg-black","text-green-400","font-mono","py-4","border-t","border-green-500","text-center","animate-fade-in-up"],[1,"text-cyan-400"]],template:function(e,n){e&1&&(ie(0,"footer",0)(1,"p"),b(2,"</> Crafted by "),ie(3,"span",1),b(4,"sponge Bop"),re(),b(5," - 2025"),re()())},styles:["footer[_ngcontent-%COMP%]{box-shadow:0 0 20px #0ff}"]})};var vt=class extends Error{constructor(t){super(t),this.name=this.constructor.name}},zn=()=>{let i=Date.now().toString(36),t=Math.random().toString(36).substring(2,7);return`${i}${t}`},br=(i,t,e)=>Math.min(Math.max(i,t),e);function Sr(i,t,e){for(let n=0;;n++){if(n==i.childCount||n==t.childCount)return i.childCount==t.childCount?null:e;let r=i.child(n),o=t.child(n);if(r==o){e+=r.nodeSize;continue}if(!r.sameMarkup(o))return e;if(r.isText&&r.text!=o.text){for(let s=0;r.text[s]==o.text[s];s++)e++;return e}if(r.content.size||o.content.size){let s=Sr(r.content,o.content,e+1);if(s!=null)return s}e+=r.nodeSize}}function Er(i,t,e,n){for(let r=i.childCount,o=t.childCount;;){if(r==0||o==0)return r==o?null:{a:e,b:n};let s=i.child(--r),l=t.child(--o),a=s.nodeSize;if(s==l){e-=a,n-=a;continue}if(!s.sameMarkup(l))return{a:e,b:n};if(s.isText&&s.text!=l.text){let c=0,p=Math.min(s.text.length,l.text.length);for(;c<p&&s.text[s.text.length-c-1]==l.text[l.text.length-c-1];)c++,e--,n--;return{a:e,b:n}}if(s.content.size||l.content.size){let c=Er(s.content,l.content,e-1,n-1);if(c)return c}e-=a,n-=a}}var C=class i{constructor(t,e){if(this.content=t,this.size=e||0,e==null)for(let n=0;n<t.length;n++)this.size+=t[n].nodeSize}nodesBetween(t,e,n,r=0,o){for(let s=0,l=0;l<e;s++){let a=this.content[s],c=l+a.nodeSize;if(c>t&&n(a,r+l,o||null,s)!==!1&&a.content.size){let p=l+1;a.nodesBetween(Math.max(0,t-p),Math.min(a.content.size,e-p),n,r+p)}l=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,n,r){let o="",s=!0;return this.nodesBetween(t,e,(l,a)=>{let c=l.isText?l.text.slice(Math.max(t,a)-a,e-a):l.isLeaf?r?typeof r=="function"?r(l):r:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&n&&(s?s=!1:o+=n),o+=c},0),o}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new i(r,this.size+t.size)}cut(t,e=this.size){if(t==0&&e==this.size)return this;let n=[],r=0;if(e>t)for(let o=0,s=0;s<e;o++){let l=this.content[o],a=s+l.nodeSize;a>t&&((s<t||a>e)&&(l.isText?l=l.cut(Math.max(0,t-s),Math.min(l.text.length,e-s)):l=l.cut(Math.max(0,t-s-1),Math.min(l.content.size,e-s-1))),n.push(l),r+=l.nodeSize),s=a}return new i(n,r)}cutByIndex(t,e){return t==e?i.empty:t==0&&e==this.content.length?this:new i(this.content.slice(t,e))}replaceChild(t,e){let n=this.content[t];if(n==e)return this;let r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new i(r,o)}addToStart(t){return new i([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new i(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,n=0;e<this.content.length;e++){let r=this.content[e];t(r,n,e),n+=r.nodeSize}}findDiffStart(t,e=0){return Sr(this,t,e)}findDiffEnd(t,e=this.size,n=t.size){return Er(this,t,e,n)}findIndex(t){if(t==0)return Vt(0,t);if(t==this.size)return Vt(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let e=0,n=0;;e++){let r=this.child(e),o=n+r.nodeSize;if(o>=t)return o==t?Vt(e+1,o):Vt(e,n);n=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,e){if(!e)return i.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new i(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return i.empty;let e,n=0;for(let r=0;r<t.length;r++){let o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new i(e||t,n)}static from(t){if(!t)return i.empty;if(t instanceof i)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new i([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};C.empty=new C([],0);var Ln={index:0,offset:0};function Vt(i,t){return Ln.index=i,Ln.offset=t,Ln}function $t(i,t){if(i===t)return!0;if(!(i&&typeof i=="object")||!(t&&typeof t=="object"))return!1;let e=Array.isArray(i);if(Array.isArray(t)!=e)return!1;if(e){if(i.length!=t.length)return!1;for(let n=0;n<i.length;n++)if(!$t(i[n],t[n]))return!1}else{for(let n in i)if(!(n in t)||!$t(i[n],t[n]))return!1;for(let n in t)if(!(n in i))return!1}return!0}var ke=(()=>{class i{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let s=e[o];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,o));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&$t(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return i.none;if(e instanceof i)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}}return i.none=[],i})(),Fe=class extends Error{},k=class i{constructor(t,e,n){this.content=t,this.openStart=e,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let n=Ir(this.content,t+this.openStart,e);return n&&new i(n,this.openStart,this.openEnd)}removeBetween(t,e){return new i(Mr(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return i.empty;let n=e.openStart||0,r=e.openEnd||0;if(typeof n!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new i(C.fromJSON(t,e.content),n,r)}static maxOpen(t,e=!0){let n=0,r=0;for(let o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(let o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)r++;return new i(t,n,r)}};k.empty=new k(C.empty,0,0);function Mr(i,t,e){let{index:n,offset:r}=i.findIndex(t),o=i.maybeChild(n),{index:s,offset:l}=i.findIndex(e);if(r==t||o.isText){if(l!=e&&!i.child(s).isText)throw new RangeError("Removing non-flat range");return i.cut(0,t).append(i.cut(e))}if(n!=s)throw new RangeError("Removing non-flat range");return i.replaceChild(n,o.copy(Mr(o.content,t-r-1,e-r-1)))}function Ir(i,t,e,n){let{index:r,offset:o}=i.findIndex(t),s=i.maybeChild(r);if(o==t||s.isText)return n&&!n.canReplace(r,r,e)?null:i.cut(0,t).append(e).append(i.cut(t));let l=Ir(s.content,t-o-1,e);return l&&i.replaceChild(r,s.copy(l))}function Es(i,t,e){if(e.openStart>i.depth)throw new Fe("Inserted content deeper than insertion position");if(i.depth-e.openStart!=t.depth-e.openEnd)throw new Fe("Inconsistent open depths");return Tr(i,t,e,0)}function Tr(i,t,e,n){let r=i.index(n),o=i.node(n);if(r==t.index(n)&&n<i.depth-e.openStart){let s=Tr(i,t,e,n+1);return o.copy(o.content.replaceChild(r,s))}else if(e.content.size)if(!e.openStart&&!e.openEnd&&i.depth==n&&t.depth==n){let s=i.parent,l=s.content;return Le(s,l.cut(0,i.parentOffset).append(e.content).append(l.cut(t.parentOffset)))}else{let{start:s,end:l}=Ms(e,i);return Le(o,Or(i,s,l,t,n))}else return Le(o,jt(i,t,n))}function Nr(i,t){if(!t.type.compatibleContent(i.type))throw new Fe("Cannot join "+t.type.name+" onto "+i.type.name)}function Fn(i,t,e){let n=i.node(e);return Nr(n,t.node(e)),n}function ze(i,t){let e=t.length-1;e>=0&&i.isText&&i.sameMarkup(t[e])?t[e]=i.withText(t[e].text+i.text):t.push(i)}function yt(i,t,e,n){let r=(t||i).node(e),o=0,s=t?t.index(e):r.childCount;i&&(o=i.index(e),i.depth>e?o++:i.textOffset&&(ze(i.nodeAfter,n),o++));for(let l=o;l<s;l++)ze(r.child(l),n);t&&t.depth==e&&t.textOffset&&ze(t.nodeBefore,n)}function Le(i,t){return i.type.checkContent(t),i.copy(t)}function Or(i,t,e,n,r){let o=i.depth>r&&Fn(i,t,r+1),s=n.depth>r&&Fn(e,n,r+1),l=[];return yt(null,i,r,l),o&&s&&t.index(r)==e.index(r)?(Nr(o,s),ze(Le(o,Or(i,t,e,n,r+1)),l)):(o&&ze(Le(o,jt(i,t,r+1)),l),yt(t,e,r,l),s&&ze(Le(s,jt(e,n,r+1)),l)),yt(n,null,r,l),new C(l)}function jt(i,t,e){let n=[];if(yt(null,i,e,n),i.depth>e){let r=Fn(i,t,e+1);ze(Le(r,jt(i,t,e+1)),n)}return yt(t,null,e,n),new C(n)}function Ms(i,t){let e=t.depth-i.openStart,r=t.node(e).copy(i.content);for(let o=e-1;o>=0;o--)r=t.node(o).copy(C.from(r));return{start:r.resolveNoCache(i.openStart+e),end:r.resolveNoCache(r.content.size-i.openEnd-e)}}var Wt=class i{constructor(t,e,n){this.pos=t,this.path=e,this.parentOffset=n,this.depth=e.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):t==0?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let n=this.path[e*3],r=e==0?0:this.path[e*3-1]+1;for(let o=0;o<t;o++)r+=n.child(o).nodeSize;return r}marks(){let t=this.parent,e=this.index();if(t.content.size==0)return ke.none;if(this.textOffset)return t.child(e).marks;let n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){let l=n;n=r,r=l}let o=n.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!r||!o[s].isInSet(r.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let n=e.marks,r=t.parent.maybeChild(t.index());for(var o=0;o<n.length;o++)n[o].type.spec.inclusive===!1&&(!r||!n[o].isInSet(r.marks))&&(n=n[o--].removeFromSet(n));return n}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new Be(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let n=[],r=0,o=e;for(let s=t;;){let{index:l,offset:a}=s.content.findIndex(o),c=o-a;if(n.push(s,l,r+a),!c||(s=s.child(l),s.isText))break;o=c-1,r+=a+1}return new i(e,n,o)}static resolveCached(t,e){let n=_r.get(t);if(n)for(let o=0;o<n.elts.length;o++){let s=n.elts[o];if(s.pos==e)return s}else _r.set(t,n=new Bn);let r=n.elts[n.i]=i.resolve(t,e);return n.i=(n.i+1)%Is,r}},Bn=class{constructor(){this.elts=[],this.i=0}},Is=12,_r=new WeakMap,Be=class{constructor(t,e,n){this.$from=t,this.$to=e,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},Ts=Object.create(null),Jt=class i{constructor(t,e,n,r=ke.none){this.type=t,this.attrs=e,this.marks=r,this.content=n||C.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,n,r=0){this.content.nodesBetween(t,e,n,r,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,n,r){return this.content.textBetween(t,e,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,n){return this.type==t&&$t(this.attrs,e||t.defaultAttrs||Ts)&&ke.sameSet(this.marks,n||ke.none)}copy(t=null){return t==this.content?this:new i(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new i(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return t==0&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,n=!1){if(t==e)return k.empty;let r=this.resolve(t),o=this.resolve(e),s=n?0:r.sharedDepth(e),l=r.start(s),c=r.node(s).content.cut(r.pos-l,o.pos-l);return new k(c,r.depth-s,o.depth-s)}replace(t,e,n){return Es(this.resolve(t),this.resolve(e),n)}nodeAt(t){for(let e=this;;){let{index:n,offset:r}=e.content.findIndex(t);if(e=e.maybeChild(n),!e)return null;if(r==t||e.isText)return e;t-=r+1}}childAfter(t){let{index:e,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:n}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:e,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(e),index:e,offset:n};let r=this.content.child(e-1);return{node:r,index:e-1,offset:n-r.nodeSize}}resolve(t){return Wt.resolveCached(this,t)}resolveNoCache(t){return Wt.resolve(this,t)}rangeHasMark(t,e,n){let r=!1;return e>t&&this.nodesBetween(t,e,o=>(n.isInSet(o.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Ns(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,n=C.empty,r=0,o=n.childCount){let s=this.contentMatchAt(t).matchFragment(n,r,o),l=s&&s.matchFragment(this.content,e);if(!l||!l.validEnd)return!1;for(let a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(t).matchType(n),s=o&&o.matchFragment(this.content,e);return s?s.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=ke.none;for(let e=0;e<this.marks.length;e++){let n=this.marks[e];n.type.checkAttrs(n.attrs),t=n.addToSet(t)}if(!ke.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(e=>e.toJSON())),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let n;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if(e.type=="text"){if(typeof e.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}let r=C.fromJSON(t,e.content),o=t.nodeType(e.type).create(e.attrs,r,n);return o.type.checkAttrs(o.attrs),o}};Jt.prototype.text=void 0;function Ns(i,t){for(let e=i.length-1;e>=0;e--)t=i[e].type.name+"("+t+")";return t}var bt=class i{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let n=new Hn(t,e);if(n.next==null)return i.empty;let r=Rr(n);n.next&&n.err("Unexpected trailing text");let o=Ls(zs(r));return Fs(o,n),o}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,n=t.childCount){let r=this;for(let o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!(e.isText||e.hasRequiredAttrs()))return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let n=0;n<t.next.length;n++)if(this.next[e].type==t.next[n].type)return!0;return!1}fillBefore(t,e=!1,n=0){let r=[this];function o(s,l){let a=s.matchFragment(t,n);if(a&&(!e||a.validEnd))return C.from(l.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:p,next:u}=s.next[c];if(!(p.isText||p.hasRequiredAttrs())&&r.indexOf(u)==-1){r.push(u);let m=o(u,l.concat(p));if(m)return m}}return null}return o(this,[])}findWrapping(t){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==t)return this.wrapCache[n+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),o=r.match;if(o.matchType(t)){let s=[];for(let l=r;l.type;l=l.via)s.push(l.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:l,next:a}=o.next[s];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in e)&&(!r.type||a.validEnd)&&(n.push({match:l.contentMatch,type:l,via:r}),e[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function e(n){t.push(n);for(let r=0;r<n.next.length;r++)t.indexOf(n.next[r].next)==-1&&e(n.next[r].next)}return e(this),t.map((n,r)=>{let o=r+(n.validEnd?"*":" ")+" ";for(let s=0;s<n.next.length;s++)o+=(s?", ":"")+n.next[s].type.name+"->"+t.indexOf(n.next[s].next);return o}).join(`
`)}};bt.empty=new bt(!0);var Hn=class{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}};function Rr(i){let t=[];do t.push(Os(i));while(i.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function Os(i){let t=[];do t.push(Rs(i));while(i.next&&i.next!=")"&&i.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function Rs(i){let t=Ds(i);for(;;)if(i.eat("+"))t={type:"plus",expr:t};else if(i.eat("*"))t={type:"star",expr:t};else if(i.eat("?"))t={type:"opt",expr:t};else if(i.eat("{"))t=As(i,t);else break;return t}function Cr(i){/\D/.test(i.next)&&i.err("Expected number, got '"+i.next+"'");let t=Number(i.next);return i.pos++,t}function As(i,t){let e=Cr(i),n=e;return i.eat(",")&&(i.next!="}"?n=Cr(i):n=-1),i.eat("}")||i.err("Unclosed braced range"),{type:"range",min:e,max:n,expr:t}}function Ps(i,t){let e=i.nodeTypes,n=e[t];if(n)return[n];let r=[];for(let o in e){let s=e[o];s.isInGroup(t)&&r.push(s)}return r.length==0&&i.err("No node type or group '"+t+"' found"),r}function Ds(i){if(i.eat("(")){let t=Rr(i);return i.eat(")")||i.err("Missing closing paren"),t}else if(/\W/.test(i.next))i.err("Unexpected token '"+i.next+"'");else{let t=Ps(i,i.next).map(e=>(i.inline==null?i.inline=e.isInline:i.inline!=e.isInline&&i.err("Mixing inline and block content"),{type:"name",value:e}));return i.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function zs(i){let t=[[]];return r(o(i,0),e()),t;function e(){return t.push([])-1}function n(s,l,a){let c={term:a,to:l};return t[s].push(c),c}function r(s,l){s.forEach(a=>a.to=l)}function o(s,l){if(s.type=="choice")return s.exprs.reduce((a,c)=>a.concat(o(c,l)),[]);if(s.type=="seq")for(let a=0;;a++){let c=o(s.exprs[a],l);if(a==s.exprs.length-1)return c;r(c,l=e())}else if(s.type=="star"){let a=e();return n(l,a),r(o(s.expr,a),a),[n(a)]}else if(s.type=="plus"){let a=e();return r(o(s.expr,l),a),r(o(s.expr,a),a),[n(a)]}else{if(s.type=="opt")return[n(l)].concat(o(s.expr,l));if(s.type=="range"){let a=l;for(let c=0;c<s.min;c++){let p=e();r(o(s.expr,a),p),a=p}if(s.max==-1)r(o(s.expr,a),a);else for(let c=s.min;c<s.max;c++){let p=e();n(a,p),r(o(s.expr,a),p),a=p}return[n(a)]}else{if(s.type=="name")return[n(l,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Ar(i,t){return t-i}function kr(i,t){let e=[];return n(t),e.sort(Ar);function n(r){let o=i[r];if(o.length==1&&!o[0].term)return n(o[0].to);e.push(r);for(let s=0;s<o.length;s++){let{term:l,to:a}=o[s];!l&&e.indexOf(a)==-1&&n(a)}}}function Ls(i){let t=Object.create(null);return e(kr(i,0));function e(n){let r=[];n.forEach(s=>{i[s].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let p=0;p<r.length;p++)r[p][0]==l&&(c=r[p][1]);kr(i,a).forEach(p=>{c||r.push([l,c=[]]),c.indexOf(p)==-1&&c.push(p)})})});let o=t[n.join(",")]=new bt(n.indexOf(i.length-1)>-1);for(let s=0;s<r.length;s++){let l=r[s][1].sort(Ar);o.next.push({type:r[s][0],next:t[l.join(",")]||e(l)})}return o}}function Fs(i,t){for(let e=0,n=[i];e<n.length;e++){let r=n[e],o=!r.validEnd,s=[];for(let l=0;l<r.next.length;l++){let{type:a,next:c}=r.next[l];s.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),n.indexOf(c)==-1&&n.push(c)}o&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}var zr=65535,Lr=Math.pow(2,16);function Bs(i,t){return i+t*Lr}function Pr(i){return i&zr}function Hs(i){return(i-(i&zr))/Lr}var Fr=1,Br=2,Ut=4,Hr=8,kt=class{constructor(t,e,n){this.pos=t,this.delInfo=e,this.recover=n}get deleted(){return(this.delInfo&Hr)>0}get deletedBefore(){return(this.delInfo&(Fr|Ut))>0}get deletedAfter(){return(this.delInfo&(Br|Ut))>0}get deletedAcross(){return(this.delInfo&Ut)>0}},ge=class i{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&i.empty)return i.empty}recover(t){let e=0,n=Pr(t);if(!this.inverted)for(let r=0;r<n;r++)e+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[n*3]+e+Hs(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,n){let r=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>t)break;let c=this.ranges[l+o],p=this.ranges[l+s],u=a+c;if(t<=u){let m=c?t==a?-1:t==u?1:e:e,d=a+r+(m<0?0:p);if(n)return d;let g=t==(e<0?a:u)?null:Bs(l/3,t-a),v=t==a?Br:t==u?Fr:Ut;return(e<0?t!=a:t!=u)&&(v|=Hr),new kt(d,v,g)}r+=p-c}return n?t+r:new kt(t+r,0,null)}touches(t,e){let n=0,r=Pr(e),o=this.inverted?2:1,s=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?n:0);if(a>t)break;let c=this.ranges[l+o],p=a+c;if(t<=p&&l==r*3)return!0;n+=this.ranges[l+s]-c}return!1}forEach(t){let e=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let s=this.ranges[r],l=s-(this.inverted?o:0),a=s+(this.inverted?0:o),c=this.ranges[r+e],p=this.ranges[r+n];t(l,l+c,a,a+p),o+=p-c}}invert(){return new i(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?i.empty:new i(t<0?[0,-t,0]:[0,0,t])}};ge.empty=new ge([]);var qt=class i{constructor(t,e,n=0,r=t?t.length:0){this.mirror=e,this.from=n,this.to=r,this._maps=t||[],this.ownData=!(t||e)}get maps(){return this._maps}slice(t=0,e=this.maps.length){return new i(this._maps,this.mirror,t,e)}appendMap(t,e){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),e!=null&&this.setMirror(this._maps.length-1,e)}appendMapping(t){for(let e=0,n=this._maps.length;e<t._maps.length;e++){let r=t.getMirror(e);this.appendMap(t._maps[e],r!=null&&r<e?n+r:void 0)}}getMirror(t){if(this.mirror){for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,n=this._maps.length+t._maps.length;e>=0;e--){let r=t.getMirror(e);this.appendMap(t._maps[e].invert(),r!=null&&r>e?n-r-1:void 0)}}invert(){let t=new i;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let n=this.from;n<this.to;n++)t=this._maps[n].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,n){let r=0;for(let o=this.from;o<this.to;o++){let s=this._maps[o],l=s.mapResult(t,e);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,t=this._maps[a].recover(l.recover);continue}}r|=l.delInfo,t=l.pos}return n?t:new kt(t,r,null)}},Vn=Object.create(null),$=class{getMap(){return ge.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Vn[e.stepType];if(!n)throw new RangeError(`No step type ${e.stepType} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in Vn)throw new RangeError("Duplicate use of step JSON ID "+t);return Vn[t]=e,e.prototype.jsonID=t,e}},j=class i{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new i(t,null)}static fail(t){return new i(null,t)}static fromReplace(t,e,n,r){try{return i.ok(t.replace(e,n,r))}catch(o){if(o instanceof Fe)return i.fail(o.message);throw o}}};function Kn(i,t,e){let n=[];for(let r=0;r<i.childCount;r++){let o=i.child(r);o.content.size&&(o=o.copy(Kn(o.content,t,o))),o.isInline&&(o=t(o,e,r)),n.push(o)}return C.fromArray(n)}var Kt=class i extends ${constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=t.resolve(this.from),r=n.node(n.sharedDepth(this.to)),o=new k(Kn(e.content,(s,l)=>!s.isAtom||!l.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),r),e.openStart,e.openEnd);return j.fromReplace(t,this.from,this.to,o)}invert(){return new Gt(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new i(e.pos,n.pos,this.mark)}merge(t){return t instanceof i&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new i(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new i(e.from,e.to,t.markFromJSON(e.mark))}};$.jsonID("addMark",Kt);var Gt=class i extends ${constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=new k(Kn(e.content,r=>r.mark(this.mark.removeFromSet(r.marks)),t),e.openStart,e.openEnd);return j.fromReplace(t,this.from,this.to,n)}invert(){return new Kt(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new i(e.pos,n.pos,this.mark)}merge(t){return t instanceof i&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new i(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new i(e.from,e.to,t.markFromJSON(e.mark))}};$.jsonID("removeMark",Gt);var Xt=class i extends ${constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return j.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return j.fromReplace(t,this.pos,this.pos+1,new k(C.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let n=this.mark.addToSet(e.marks);if(n.length==e.marks.length){for(let r=0;r<e.marks.length;r++)if(!e.marks[r].isInSet(n))return new i(this.pos,e.marks[r]);return new i(this.pos,this.mark)}}return new Qt(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new i(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new i(e.pos,t.markFromJSON(e.mark))}};$.jsonID("addNodeMark",Xt);var Qt=class i extends ${constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return j.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return j.fromReplace(t,this.pos,this.pos+1,new k(C.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return!e||!this.mark.isInSet(e.marks)?this:new Xt(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new i(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new i(e.pos,t.markFromJSON(e.mark))}};$.jsonID("removeNodeMark",Qt);var Se=class i extends ${constructor(t,e,n,r=!1){super(),this.from=t,this.to=e,this.slice=n,this.structure=r}apply(t){return this.structure&&Wn(t,this.from,this.to)?j.fail("Structure replace would overwrite content"):j.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new ge([this.from,this.to-this.from,this.slice.size])}invert(t){return new i(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deletedAcross&&n.deletedAcross?null:new i(e.pos,Math.max(e.pos,n.pos),this.slice,this.structure)}merge(t){if(!(t instanceof i)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let e=this.slice.size+t.slice.size==0?k.empty:new k(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new i(this.from,this.to+(t.to-t.from),e,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let e=this.slice.size+t.slice.size==0?k.empty:new k(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new i(t.from,this.to,e,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new i(e.from,e.to,k.fromJSON(t,e.slice),!!e.structure)}};$.jsonID("replace",Se);var Y=class i extends ${constructor(t,e,n,r,o,s,l=!1){super(),this.from=t,this.to=e,this.gapFrom=n,this.gapTo=r,this.slice=o,this.insert=s,this.structure=l}apply(t){if(this.structure&&(Wn(t,this.from,this.gapFrom)||Wn(t,this.gapTo,this.to)))return j.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return j.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,e.content);return n?j.fromReplace(t,this.from,this.to,n):j.fail("Content does not fit in gap")}getMap(){return new ge([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new i(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),r=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),o=this.to==this.gapTo?n.pos:t.map(this.gapTo,1);return e.deletedAcross&&n.deletedAcross||r<e.pos||o>n.pos?null:new i(e.pos,n.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number"||typeof e.gapFrom!="number"||typeof e.gapTo!="number"||typeof e.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new i(e.from,e.to,e.gapFrom,e.gapTo,k.fromJSON(t,e.slice),e.insert,!!e.structure)}};$.jsonID("replaceAround",Y);function Wn(i,t,e){let n=i.resolve(t),r=e-t,o=n.depth;for(;r>0&&o>0&&n.indexAfter(o)==n.node(o).childCount;)o--,r--;if(r>0){let s=n.node(o).maybeChild(n.indexAfter(o));for(;r>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,r--}}return!1}function Vs(i,t,e){return(t==0||i.canReplace(t,i.childCount))&&(e==i.childCount||i.canReplace(0,e))}function He(i){let e=i.parent.content.cutByIndex(i.startIndex,i.endIndex);for(let n=i.depth;;--n){let r=i.$from.node(n),o=i.$from.index(n),s=i.$to.indexAfter(n);if(n<i.depth&&r.canReplace(o,s,e))return n;if(n==0||r.type.spec.isolating||!Vs(r,o,s))break}return null}function Yt(i,t,e=null,n=i){let r=$s(i,t),o=r&&js(n,t);return o?r.map(Dr).concat({type:t,attrs:e}).concat(o.map(Dr)):null}function Dr(i){return{type:i,attrs:null}}function $s(i,t){let{parent:e,startIndex:n,endIndex:r}=i,o=e.contentMatchAt(n).findWrapping(t);if(!o)return null;let s=o.length?o[0]:t;return e.canReplaceWith(n,r,s)?o:null}function js(i,t){let{parent:e,startIndex:n,endIndex:r}=i,o=e.child(n),s=t.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:t).contentMatch;for(let c=n;a&&c<r;c++)a=a.matchType(e.child(c).type);return!a||!a.validEnd?null:s}function Ve(i,t,e=1,n){let r=i.resolve(t),o=r.depth-e,s=n&&n[n.length-1]||r.parent;if(o<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!s.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let c=r.depth-1,p=e-2;c>o;c--,p--){let u=r.node(c),m=r.index(c);if(u.type.spec.isolating)return!1;let d=u.content.cutByIndex(m,u.childCount),g=n&&n[p+1];g&&(d=d.replaceChild(0,g.type.create(g.attrs)));let v=n&&n[p]||u;if(!u.canReplace(m+1,u.childCount)||!v.type.validContent(d))return!1}let l=r.indexAfter(o),a=n&&n[0];return r.node(o).canReplaceWith(l,l,a?a.type:r.node(o+1).type)}function Et(i,t){let e=i.resolve(t),n=e.index();return Js(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(n,n+1)}function Ws(i,t){t.content.size||i.type.compatibleContent(t.type);let e=i.contentMatchAt(i.childCount),{linebreakReplacement:n}=i.type.schema;for(let r=0;r<t.childCount;r++){let o=t.child(r),s=o.type==n?i.type.schema.nodes.text:o.type;if(e=e.matchType(s),!e||!i.type.allowsMarks(o.marks))return!1}return e.validEnd}function Js(i,t){return!!(i&&t&&!i.isLeaf&&Ws(i,t))}function Gn(i,t,e=t,n=k.empty){if(t==e&&!n.size)return null;let r=i.resolve(t),o=i.resolve(e);return Us(r,o,n)?new Se(t,e,n):new Jn(r,o,n).fit()}function Us(i,t,e){return!e.openStart&&!e.openEnd&&i.start()==t.start()&&i.parent.canReplace(i.index(),t.index(),e.content)}var Jn=class{constructor(t,e,n){this.$from=t,this.$to=e,this.unplaced=n,this.frontier=[],this.placed=C.empty;for(let r=0;r<=t.depth;r++){let o=t.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(r))})}for(let r=t.depth;r>0;r--)this.placed=C.from(t.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(t<0?this.$to:n.doc.resolve(t));if(!r)return null;let o=this.placed,s=n.depth,l=r.depth;for(;s&&l&&o.childCount==1;)o=o.firstChild.content,s--,l--;let a=new k(o,s,l);return t>-1?new Y(n.pos,t,this.$to.pos,this.$to.end(),a,e):a.size||n.pos!=this.$to.pos?new Se(n.pos,r.pos,a):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<t;n++){let o=e.firstChild;if(e.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){t=n;break}e=o.content}for(let e=1;e<=2;e++)for(let n=e==1?t:this.unplaced.openStart;n>=0;n--){let r,o=null;n?(o=$n(this.unplaced.content,n-1).firstChild,r=o.content):r=this.unplaced.content;let s=r.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],p,u=null;if(e==1&&(s?c.matchType(s.type)||(u=c.fillBefore(C.from(s),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:n,frontierDepth:l,parent:o,inject:u};if(e==2&&s&&(p=c.findWrapping(s.type)))return{sliceDepth:n,frontierDepth:l,parent:o,wrap:p};if(o&&c.matchType(o.type))break}}}openMore(){let{content:t,openStart:e,openEnd:n}=this.unplaced,r=$n(t,e);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new k(t,e+1,Math.max(n,r.size+e>=t.size-n?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:n}=this.unplaced,r=$n(t,e);if(r.childCount<=1&&e>0){let o=t.size-e<=e+r.size;this.unplaced=new k(_t(t,e-1,1),e-1,o?e-1:n)}else this.unplaced=new k(_t(t,e,1),e,n)}placeNodes({sliceDepth:t,frontierDepth:e,parent:n,inject:r,wrap:o}){for(;this.depth>e;)this.closeFrontierNode();if(o)for(let v=0;v<o.length;v++)this.openFrontierNode(o[v]);let s=this.unplaced,l=n?n.content:s.content,a=s.openStart-t,c=0,p=[],{match:u,type:m}=this.frontier[e];if(r){for(let v=0;v<r.childCount;v++)p.push(r.child(v));u=u.matchFragment(r)}let d=l.size+t-(s.content.size-s.openEnd);for(;c<l.childCount;){let v=l.child(c),_=u.matchType(v.type);if(!_)break;c++,(c>1||a==0||v.content.size)&&(u=_,p.push(Vr(v.mark(m.allowedMarks(v.marks)),c==1?a:0,c==l.childCount?d:-1)))}let g=c==l.childCount;g||(d=-1),this.placed=Ct(this.placed,e,C.from(p)),this.frontier[e].match=u,g&&d<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let v=0,_=l;v<d;v++){let E=_.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),_=E.content}this.unplaced=g?t==0?k.empty:new k(_t(s.content,t-1,1),t-1,d<0?s.openEnd:t-1):new k(_t(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],e;if(!t.type.isTextblock||!jn(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(t){e:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:n,type:r}=this.frontier[e],o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=jn(t,e,r,n,o);if(s){for(let l=e-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],p=jn(t,l,c,a,!0);if(!p||p.childCount)continue e}return{depth:e,fit:s,move:o?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=Ct(this.placed,e.depth,e.fit)),t=e.move;for(let n=e.depth+1;n<=t.depth;n++){let r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t}openFrontierNode(t,e=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=Ct(this.placed,this.depth,C.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(C.empty,!0);e.childCount&&(this.placed=Ct(this.placed,this.frontier.length,e))}};function _t(i,t,e){return t==0?i.cutByIndex(e,i.childCount):i.replaceChild(0,i.firstChild.copy(_t(i.firstChild.content,t-1,e)))}function Ct(i,t,e){return t==0?i.append(e):i.replaceChild(i.childCount-1,i.lastChild.copy(Ct(i.lastChild.content,t-1,e)))}function $n(i,t){for(let e=0;e<t;e++)i=i.firstChild.content;return i}function Vr(i,t,e){if(t<=0)return i;let n=i.content;return t>1&&(n=n.replaceChild(0,Vr(n.firstChild,t-1,n.childCount==1?e-1:0))),t>0&&(n=i.type.contentMatch.fillBefore(n).append(n),e<=0&&(n=n.append(i.type.contentMatch.matchFragment(n).fillBefore(C.empty,!0)))),i.copy(n)}function jn(i,t,e,n,r){let o=i.node(t),s=r?i.indexAfter(t):i.index(t);if(s==o.childCount&&!e.compatibleContent(o.type))return null;let l=n.fillBefore(o.content,!0,s);return l&&!qs(e,o.content,s)?l:null}function qs(i,t,e){for(let n=e;n<t.childCount;n++)if(!i.allowsMarks(t.child(n).marks))return!0;return!1}var Un=class i extends ${constructor(t,e,n){super(),this.pos=t,this.attr=e,this.value=n}apply(t){let e=t.nodeAt(this.pos);if(!e)return j.fail("No node at attribute step's position");let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,null,e.marks);return j.fromReplace(t,this.pos,this.pos+1,new k(C.from(r),0,e.isLeaf?0:1))}getMap(){return ge.empty}invert(t){return new i(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new i(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.pos!="number"||typeof e.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new i(e.pos,e.attr,e.value)}};$.jsonID("attr",Un);var qn=class i extends ${constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let r in t.attrs)e[r]=t.attrs[r];e[this.attr]=this.value;let n=t.type.create(e,t.content,t.marks);return j.ok(n)}getMap(){return ge.empty}invert(t){return new i(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new i(e.attr,e.value)}};$.jsonID("docAttr",qn);var St=class extends Error{};St=function i(t){let e=Error.call(this,t);return e.__proto__=i.prototype,e};St.prototype=Object.create(Error.prototype);St.prototype.constructor=St;St.prototype.name="TransformError";var Xn=Object.create(null),R=class{constructor(t,e,n){this.$anchor=t,this.$head=e,this.ranges=n||[new et(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=k.empty){let n=e.content.lastChild,r=null;for(let l=0;l<e.openEnd;l++)r=n,n=n.lastChild;let o=t.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:a,$to:c}=s[l],p=t.mapping.slice(o);t.replaceRange(p.map(a.pos),p.map(c.pos),l?k.empty:e),l==0&&Wr(t,o,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(t,e){let n=t.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:s,$to:l}=r[o],a=t.mapping.slice(n),c=a.map(s.pos),p=a.map(l.pos);o?t.deleteRange(c,p):(t.replaceRangeWith(c,p,e),Wr(t,n,e.isInline?-1:1))}}static findFrom(t,e,n=!1){let r=t.parent.inlineContent?new G(t):Ye(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(let o=t.depth-1;o>=0;o--){let s=e<0?Ye(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):Ye(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(s)return s}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new oe(t.node(0))}static atStart(t){return Ye(t,t,0,0,1)||new oe(t)}static atEnd(t){return Ye(t,t,t.content.size,t.childCount,-1)||new oe(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Xn[e.type];if(!n)throw new RangeError(`No selection type ${e.type} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in Xn)throw new RangeError("Duplicate use of selection JSON ID "+t);return Xn[t]=e,e.prototype.jsonID=t,e}getBookmark(){return G.between(this.$anchor,this.$head).getBookmark()}};R.prototype.visible=!0;var et=class{constructor(t,e){this.$from=t,this.$to=e}},$r=!1;function jr(i){!$r&&!i.parent.inlineContent&&($r=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+i.parent.type.name+")"))}var G=class i extends R{constructor(t,e=t){jr(t),jr(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let n=t.resolve(e.map(this.head));if(!n.parent.inlineContent)return R.near(n);let r=t.resolve(e.map(this.anchor));return new i(r.parent.inlineContent?r:n,n)}replace(t,e=k.empty){if(super.replace(t,e),e==k.empty){let n=this.$from.marksAcross(this.$to);n&&t.ensureMarks(n)}}eq(t){return t instanceof i&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Zt(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if(typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new i(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,n=e){let r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))}static between(t,e,n){let r=t.pos-e.pos;if((!n||r)&&(n=r>=0?1:-1),!e.parent.inlineContent){let o=R.findFrom(e,n,!0)||R.findFrom(e,-n,!0);if(o)e=o.$head;else return R.near(e,n)}return t.parent.inlineContent||(r==0?t=e:(t=(R.findFrom(t,-n,!0)||R.findFrom(t,n,!0)).$anchor,t.pos<e.pos!=r<0&&(t=e))),new i(t,e)}};R.jsonID("text",G);var Zt=class i{constructor(t,e){this.anchor=t,this.head=e}map(t){return new i(t.map(this.anchor),t.map(this.head))}resolve(t){return G.between(t.resolve(this.anchor),t.resolve(this.head))}},A=class i extends R{constructor(t){let e=t.nodeAfter,n=t.node(0).resolve(t.pos+e.nodeSize);super(t,n),this.node=e}map(t,e){let{deleted:n,pos:r}=e.mapResult(this.anchor),o=t.resolve(r);return n?R.near(o):new i(o)}content(){return new k(C.from(this.node),0,0)}eq(t){return t instanceof i&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Yn(this.anchor)}static fromJSON(t,e){if(typeof e.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new i(t.resolve(e.anchor))}static create(t,e){return new i(t.resolve(e))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}};A.prototype.visible=!1;R.jsonID("node",A);var Yn=class i{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:n}=t.mapResult(this.anchor);return e?new Zt(n,n):new i(n)}resolve(t){let e=t.resolve(this.anchor),n=e.nodeAfter;return n&&A.isSelectable(n)?new A(e):R.near(e)}},oe=class i extends R{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=k.empty){if(e==k.empty){t.delete(0,t.doc.content.size);let n=R.atStart(t.doc);n.eq(t.selection)||t.setSelection(n)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new i(t)}map(t){return new i(t)}eq(t){return t instanceof i}getBookmark(){return Ks}};R.jsonID("all",oe);var Ks={map(){return this},resolve(i){return new oe(i)}};function Ye(i,t,e,n,r,o=!1){if(t.inlineContent)return G.create(i,e);for(let s=n-(r>0?0:1);r>0?s<t.childCount:s>=0;s+=r){let l=t.child(s);if(l.isAtom){if(!o&&A.isSelectable(l))return A.create(i,e-(r<0?l.nodeSize:0))}else{let a=Ye(i,l,e+r,r<0?l.childCount:0,r,o);if(a)return a}e+=l.nodeSize*r}return null}function Wr(i,t,e){let n=i.steps.length-1;if(n<t)return;let r=i.steps[n];if(!(r instanceof Se||r instanceof Y))return;let o=i.mapping.maps[n],s;o.forEach((l,a,c,p)=>{s==null&&(s=p)}),i.setSelection(R.near(i.doc.resolve(s),e))}function Jr(i,t){return!t||!i?i:i.bind(t)}var Ze=class{constructor(t,e,n){this.name=t,this.init=Jr(e.init,n),this.apply=Jr(e.apply,n)}},tu=[new Ze("doc",{init(i){return i.doc||i.schema.topNodeType.createAndFill()},apply(i){return i.doc}}),new Ze("selection",{init(i,t){return i.selection||R.atStart(t.doc)},apply(i){return i.selection}}),new Ze("storedMarks",{init(i){return i.storedMarks||null},apply(i,t,e,n){return n.selection.$cursor?i.storedMarks:null}}),new Ze("scrollToSelection",{init(){return 0},apply(i,t){return i.scrolledIntoView?t+1:t}})];var Qn=Object.create(null);function Gs(i){return i in Qn?i+"$"+ ++Qn[i]:(Qn[i]=0,i+"$")}var tt=class{constructor(t="key"){this.key=Gs(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}};function Ur(i,t=null){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o);if(!s)return!1;let l=n?e.tr:null;return Xs(l,s,i,t)?(n&&n(l.scrollIntoView()),!0):!1}}function Xs(i,t,e,n=null){let r=!1,o=t,s=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(e)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let a=s.resolve(t.start-2);o=new Be(a,a,t.depth),t.endIndex<t.parent.childCount&&(t=new Be(t.$from,s.resolve(t.$to.end(t.depth)),t.depth)),r=!0}let l=Yt(o,e,n,t);return l?(i&&Qs(i,t,l,r,e),!0):!1}function Qs(i,t,e,n,r){let o=C.empty;for(let p=e.length-1;p>=0;p--)o=C.from(e[p].type.create(e[p].attrs,o));i.step(new Y(t.start-(n?2:0),t.end,t.start,t.end,new k(o,0,0),e.length,!0));let s=0;for(let p=0;p<e.length;p++)e[p].type==r&&(s=p+1);let l=e.length-s,a=t.start+e.length-(n?2:0),c=t.parent;for(let p=t.startIndex,u=t.endIndex,m=!0;p<u;p++,m=!1)!m&&Ve(i.doc,a,l)&&(i.split(a,l),a+=2*l),a+=c.child(p).nodeSize;return i}function qr(i){return function(t,e){let{$from:n,$to:r}=t.selection,o=n.blockRange(r,s=>s.childCount>0&&s.firstChild.type==i);return o?e?n.node(o.depth-1).type==i?Ys(t,e,i,o):Zs(t,e,o):!0:!1}}function Ys(i,t,e,n){let r=i.tr,o=n.end,s=n.$to.end(n.depth);o<s&&(r.step(new Y(o-1,s,o,s,new k(C.from(e.create(null,n.parent.copy())),1,0),1,!0)),n=new Be(r.doc.resolve(n.$from.pos),r.doc.resolve(s),n.depth));let l=He(n);if(l==null)return!1;r.lift(n,l);let a=r.doc.resolve(r.mapping.map(o,-1)-1);return Et(r.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&r.join(a.pos),t(r.scrollIntoView()),!0}function Zs(i,t,e){let n=i.tr,r=e.parent;for(let d=e.end,g=e.endIndex-1,v=e.startIndex;g>v;g--)d-=r.child(g).nodeSize,n.delete(d-1,d+1);let o=n.doc.resolve(e.start),s=o.nodeAfter;if(n.mapping.map(e.end)!=e.start+o.nodeAfter.nodeSize)return!1;let l=e.startIndex==0,a=e.endIndex==r.childCount,c=o.node(-1),p=o.index(-1);if(!c.canReplace(p+(l?0:1),p+1,s.content.append(a?C.empty:C.from(r))))return!1;let u=o.pos,m=u+s.nodeSize;return n.step(new Y(u-(l?1:0),m+(a?1:0),u+1,m-1,new k((l?C.empty:C.from(r.copy(C.empty))).append(a?C.empty:C.from(r.copy(C.empty))),l?0:1,a?0:1),l?0:1)),t(n.scrollIntoView()),!0}var Gr=(i,t)=>i.selection.empty?!1:(t&&t(i.tr.deleteSelection().scrollIntoView()),!0);function el(i,t){let{$cursor:e}=i.selection;return!e||(t?!t.endOfTextblock("backward",i):e.parentOffset>0)?null:e}var tl=(i,t,e)=>{let n=el(i,e);if(!n)return!1;let r=Xr(n);if(!r){let s=n.blockRange(),l=s&&He(s);return l==null?!1:(t&&t(i.tr.lift(s,l).scrollIntoView()),!0)}let o=r.nodeBefore;if(ro(i,r,t,-1))return!0;if(n.parent.content.size==0&&(nt(o,"end")||A.isSelectable(o)))for(let s=n.depth;;s--){let l=Gn(i.doc,n.before(s),n.after(s),k.empty);if(l&&l.slice.size<l.to-l.from){if(t){let a=i.tr.step(l);a.setSelection(nt(o,"end")?R.findFrom(a.doc.resolve(a.mapping.map(r.pos,-1)),-1):A.create(a.doc,r.pos-o.nodeSize)),t(a.scrollIntoView())}return!0}if(s==1||n.node(s-1).childCount>1)break}return o.isAtom&&r.depth==n.depth-1?(t&&t(i.tr.delete(r.pos-o.nodeSize,r.pos).scrollIntoView()),!0):!1};function nt(i,t,e=!1){for(let n=i;n;n=t=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(e&&n.childCount!=1)return!1}return!1}var nl=(i,t,e)=>{let{$head:n,empty:r}=i.selection,o=n;if(!r)return!1;if(n.parent.isTextblock){if(e?!e.endOfTextblock("backward",i):n.parentOffset>0)return!1;o=Xr(n)}let s=o&&o.nodeBefore;return!s||!A.isSelectable(s)?!1:(t&&t(i.tr.setSelection(A.create(i.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Xr(i){if(!i.parent.type.spec.isolating)for(let t=i.depth-1;t>=0;t--){if(i.index(t)>0)return i.doc.resolve(i.before(t+1));if(i.node(t).type.spec.isolating)break}return null}function il(i,t){let{$cursor:e}=i.selection;return!e||(t?!t.endOfTextblock("forward",i):e.parentOffset<e.parent.content.size)?null:e}var rl=(i,t,e)=>{let n=il(i,e);if(!n)return!1;let r=Qr(n);if(!r)return!1;let o=r.nodeAfter;if(ro(i,r,t,1))return!0;if(n.parent.content.size==0&&(nt(o,"start")||A.isSelectable(o))){let s=Gn(i.doc,n.before(),n.after(),k.empty);if(s&&s.slice.size<s.to-s.from){if(t){let l=i.tr.step(s);l.setSelection(nt(o,"start")?R.findFrom(l.doc.resolve(l.mapping.map(r.pos)),1):A.create(l.doc,l.mapping.map(r.pos))),t(l.scrollIntoView())}return!0}}return o.isAtom&&r.depth==n.depth-1?(t&&t(i.tr.delete(r.pos,r.pos+o.nodeSize).scrollIntoView()),!0):!1},ol=(i,t,e)=>{let{$head:n,empty:r}=i.selection,o=n;if(!r)return!1;if(n.parent.isTextblock){if(e?!e.endOfTextblock("forward",i):n.parentOffset<n.parent.content.size)return!1;o=Qr(n)}let s=o&&o.nodeAfter;return!s||!A.isSelectable(s)?!1:(t&&t(i.tr.setSelection(A.create(i.doc,o.pos)).scrollIntoView()),!0)};function Qr(i){if(!i.parent.type.spec.isolating)for(let t=i.depth-1;t>=0;t--){let e=i.node(t);if(i.index(t)+1<e.childCount)return i.doc.resolve(i.after(t+1));if(e.type.spec.isolating)break}return null}var Yr=(i,t)=>{let{$from:e,$to:n}=i.selection,r=e.blockRange(n),o=r&&He(r);return o==null?!1:(t&&t(i.tr.lift(r,o).scrollIntoView()),!0)},Zr=(i,t)=>{let{$head:e,$anchor:n}=i.selection;return!e.parent.type.spec.code||!e.sameParent(n)?!1:(t&&t(i.tr.insertText(`
`).scrollIntoView()),!0)};function ei(i){for(let t=0;t<i.edgeCount;t++){let{type:e}=i.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}var eo=(i,t)=>{let{$head:e,$anchor:n}=i.selection;if(!e.parent.type.spec.code||!e.sameParent(n))return!1;let r=e.node(-1),o=e.indexAfter(-1),s=ei(r.contentMatchAt(o));if(!s||!r.canReplaceWith(o,o,s))return!1;if(t){let l=e.after(),a=i.tr.replaceWith(l,l,s.createAndFill());a.setSelection(R.near(a.doc.resolve(l),1)),t(a.scrollIntoView())}return!0},to=(i,t)=>{let e=i.selection,{$from:n,$to:r}=e;if(e instanceof oe||n.parent.inlineContent||r.parent.inlineContent)return!1;let o=ei(r.parent.contentMatchAt(r.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let s=(!n.parentOffset&&r.index()<r.parent.childCount?n:r).pos,l=i.tr.insert(s,o.createAndFill());l.setSelection(G.create(l.doc,s+1)),t(l.scrollIntoView())}return!0},no=(i,t)=>{let{$cursor:e}=i.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let o=e.before();if(Ve(i.doc,o))return t&&t(i.tr.split(o).scrollIntoView()),!0}let n=e.blockRange(),r=n&&He(n);return r==null?!1:(t&&t(i.tr.lift(n,r).scrollIntoView()),!0)};function sl(i){return(t,e)=>{let{$from:n,$to:r}=t.selection;if(t.selection instanceof A&&t.selection.node.isBlock)return!n.parentOffset||!Ve(t.doc,n.pos)?!1:(e&&e(t.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let o=[],s,l,a=!1,c=!1;for(let d=n.depth;;d--)if(n.node(d).isBlock){a=n.end(d)==n.pos+(n.depth-d),c=n.start(d)==n.pos-(n.depth-d),l=ei(n.node(d-1).contentMatchAt(n.indexAfter(d-1)));let v=i&&i(r.parent,a,n);o.unshift(v||(a&&l?{type:l}:null)),s=d;break}else{if(d==1)return!1;o.unshift(null)}let p=t.tr;(t.selection instanceof G||t.selection instanceof oe)&&p.deleteSelection();let u=p.mapping.map(n.pos),m=Ve(p.doc,u,o.length,o);if(m||(o[0]=l?{type:l}:null,m=Ve(p.doc,u,o.length,o)),!m)return!1;if(p.split(u,o.length,o),!a&&c&&n.node(s).type!=l){let d=p.mapping.map(n.before(s)),g=p.doc.resolve(d);l&&n.node(s-1).canReplaceWith(g.index(),g.index()+1,l)&&p.setNodeMarkup(p.mapping.map(n.before(s)),l)}return e&&e(p.scrollIntoView()),!0}}var io=sl();var ll=(i,t)=>(t&&t(i.tr.setSelection(new oe(i.doc))),!0);function al(i,t,e){let n=t.nodeBefore,r=t.nodeAfter,o=t.index();return!n||!r||!n.type.compatibleContent(r.type)?!1:!n.content.size&&t.parent.canReplace(o-1,o)?(e&&e(i.tr.delete(t.pos-n.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(o,o+1)||!(r.isTextblock||Et(i.doc,t.pos))?!1:(e&&e(i.tr.join(t.pos).scrollIntoView()),!0)}function ro(i,t,e,n){let r=t.nodeBefore,o=t.nodeAfter,s,l,a=r.type.spec.isolating||o.type.spec.isolating;if(!a&&al(i,t,e))return!0;let c=!a&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(s=(l=r.contentMatchAt(r.childCount)).findWrapping(o.type))&&l.matchType(s[0]||o.type).validEnd){if(e){let d=t.pos+o.nodeSize,g=C.empty;for(let E=s.length-1;E>=0;E--)g=C.from(s[E].create(null,g));g=C.from(r.copy(g));let v=i.tr.step(new Y(t.pos-1,d,t.pos,d,new k(g,1,0),s.length,!0)),_=v.doc.resolve(d+2*s.length);_.nodeAfter&&_.nodeAfter.type==r.type&&Et(v.doc,_.pos)&&v.join(_.pos),e(v.scrollIntoView())}return!0}let p=o.type.spec.isolating||n>0&&a?null:R.findFrom(t,1),u=p&&p.$from.blockRange(p.$to),m=u&&He(u);if(m!=null&&m>=t.depth)return e&&e(i.tr.lift(u,m).scrollIntoView()),!0;if(c&&nt(o,"start",!0)&&nt(r,"end")){let d=r,g=[];for(;g.push(d),!d.isTextblock;)d=d.lastChild;let v=o,_=1;for(;!v.isTextblock;v=v.firstChild)_++;if(d.canReplace(d.childCount,d.childCount,v.content)){if(e){let E=C.empty;for(let z=g.length-1;z>=0;z--)E=C.from(g[z].copy(E));let B=i.tr.step(new Y(t.pos-g.length,t.pos+o.nodeSize,t.pos+_,t.pos+o.nodeSize-_,new k(E,g.length,0),0,!0));e(B.scrollIntoView())}return!0}}return!1}function oo(i){return function(t,e){let n=t.selection,r=i<0?n.$from:n.$to,o=r.depth;for(;r.node(o).isInline;){if(!o)return!1;o--}return r.node(o).isTextblock?(e&&e(t.tr.setSelection(G.create(t.doc,i<0?r.start(o):r.end(o)))),!0):!1}}var cl=oo(-1),pl=oo(1);function so(i,t=null){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o),l=s&&Yt(s,i,t);return l?(n&&n(e.tr.wrap(s,l).scrollIntoView()),!0):!1}}function en(i,t=null){return function(e,n){let r=!1;for(let o=0;o<e.selection.ranges.length&&!r;o++){let{$from:{pos:s},$to:{pos:l}}=e.selection.ranges[o];e.doc.nodesBetween(s,l,(a,c)=>{if(r)return!1;if(!(!a.isTextblock||a.hasMarkup(i,t)))if(a.type==i)r=!0;else{let p=e.doc.resolve(c),u=p.index();r=p.parent.canReplaceWith(u,u+1,i)}})}if(!r)return!1;if(n){let o=e.tr;for(let s=0;s<e.selection.ranges.length;s++){let{$from:{pos:l},$to:{pos:a}}=e.selection.ranges[s];o.setBlockType(l,a,i,t)}n(o.scrollIntoView())}return!0}}function ul(i,t,e,n){for(let r=0;r<t.length;r++){let{$from:o,$to:s}=t[r],l=o.depth==0?i.inlineContent&&i.type.allowsMarkType(e):!1;if(i.nodesBetween(o.pos,s.pos,(a,c)=>{if(l||!n&&a.isAtom&&a.isInline&&c>=o.pos&&c+a.nodeSize<=s.pos)return!1;l=a.inlineContent&&a.type.allowsMarkType(e)}),l)return!0}return!1}function dl(i){let t=[];for(let e=0;e<i.length;e++){let{$from:n,$to:r}=i[e];n.doc.nodesBetween(n.pos,r.pos,(o,s)=>{if(o.isAtom&&o.content.size&&o.isInline&&s>=n.pos&&s+o.nodeSize<=r.pos)return s+1>n.pos&&t.push(new et(n,n.doc.resolve(s+1))),n=n.doc.resolve(s+1+o.content.size),!1}),n.pos<r.pos&&t.push(new et(n,r))}return t}function ti(i,t=null,e){let n=(e&&e.removeWhenPresent)!==!1,r=(e&&e.enterInlineAtoms)!==!1,o=!(e&&e.includeWhitespace);return function(s,l){let{empty:a,$cursor:c,ranges:p}=s.selection;if(a&&!c||!ul(s.doc,p,i,r))return!1;if(l)if(c)i.isInSet(s.storedMarks||c.marks())?l(s.tr.removeStoredMark(i)):l(s.tr.addStoredMark(i.create(t)));else{let u,m=s.tr;r||(p=dl(p)),n?u=!p.some(d=>s.doc.rangeHasMark(d.$from.pos,d.$to.pos,i)):u=!p.every(d=>{let g=!1;return m.doc.nodesBetween(d.$from.pos,d.$to.pos,(v,_,E)=>{if(g)return!1;g=!i.isInSet(v.marks)&&!!E&&E.type.allowsMarkType(i)&&!(v.isText&&/^\s*$/.test(v.textBetween(Math.max(0,d.$from.pos-_),Math.min(v.nodeSize,d.$to.pos-_))))}),!g});for(let d=0;d<p.length;d++){let{$from:g,$to:v}=p[d];if(!u)m.removeMark(g.pos,v.pos,i);else{let _=g.pos,E=v.pos,B=g.nodeAfter,z=v.nodeBefore,q=o&&B&&B.isText?/^\s*/.exec(B.text)[0].length:0,J=o&&z&&z.isText?/\s*$/.exec(z.text)[0].length:0;_+q<E&&(_+=q,E-=J),m.addMark(_,E,i.create(t))}}l(m.scrollIntoView())}return!0}}function tn(...i){return function(t,e,n){for(let r=0;r<i.length;r++)if(i[r](t,e,n))return!0;return!1}}var Zn=tn(Gr,tl,nl),Kr=tn(Gr,rl,ol),Ee={Enter:tn(Zr,to,no,io),"Mod-Enter":eo,Backspace:Zn,"Mod-Backspace":Zn,"Shift-Backspace":Zn,Delete:Kr,"Mod-Delete":Kr,"Mod-a":ll},fl={"Ctrl-h":Ee.Backspace,"Alt-Backspace":Ee["Mod-Backspace"],"Ctrl-d":Ee.Delete,"Ctrl-Alt-Backspace":Ee["Mod-Delete"],"Alt-Delete":Ee["Mod-Delete"],"Alt-d":Ee["Mod-Delete"],"Ctrl-a":cl,"Ctrl-e":pl};for(let i in Ee)fl[i]=Ee[i];var pu=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1;var nn=(i,t)=>{let{from:e,$from:n,to:r,empty:o}=i.selection;return o?!!t.isInSet(i.storedMarks||n.marks()):i.doc.rangeHasMark(e,r,t)},hl=(i,t)=>{for(let e=t.depth;e>0;e-=1)if(t.node(e).type===i)return t.node(e).type;return null},ni=(i,t,e={})=>{let{selection:n}=i,{$from:r,to:o}=n,s=hl(t,r);return!Object.entries(e).length||!s?!!s:o<=r.end()&&r.parent.hasMarkup(t,e)},lo=i=>{let t=[],{selection:e,storedMarks:n}=i,{from:r,to:o,empty:s,$from:l}=e;return s?t=n||l.marks():i.doc.nodesBetween(r,o,a=>{t=[...t,...a.marks]}),t},ii=i=>{let t=[],{selection:{from:e,to:n}}=i;return i.doc.nodesBetween(e,n,r=>{t.push(r)}),t},ri=(i,t,e)=>{for(let n of t){let{$from:r,$to:o}=n,s=r.depth===0?i.type.allowsMarkType(e):!1;if(i.nodesBetween(r.pos,o.pos,l=>s?!1:(s=l.inlineContent&&l.type.allowsMarkType(e),!0)),s)return!0}return!1};var ao=(i,t)=>{let{$from:e}=i.selection;for(let n=e.depth;n>=0;n-=1){let r=e.index(n);if(e.node(n).canReplaceWith(r,r,t))return!0}return!1};var co=()=>(i,t)=>{let{doc:e,selection:n,tr:r,schema:o}=i,{$head:{pos:s},from:l,to:a}=n,c=o.marks.link;if(l===a){let p=e.resolve(s),u=s-p.textOffset,m=u+p.parent.child(p.index()).nodeSize;r.removeMark(u,m,c)}else r.removeMark(l,a,c);return r.docChanged?(t?.(r),!0):!1},oi=(i,t={})=>(e,n)=>{let{tr:r,selection:o}=e,{empty:s,ranges:l,$from:a,$to:c}=o;if(s&&o instanceof G){let{$cursor:p}=o;if(!p||!ri(e.doc,l,i)||(r.addStoredMark(i.create(t)),!r.storedMarksSet))return!1;n?.(r)}else{if(r.addMark(a.pos,c.pos,i.create(t)),!r.docChanged)return!1;n?.(r.scrollIntoView())}return!0},po=i=>(t,e)=>{let{tr:n,selection:r,storedMarks:o,doc:s}=t,{empty:l,ranges:a}=r;if(l&&r instanceof G){let{$cursor:c}=r;if(!c||!ri(t.doc,a,i))return!1;if(i.isInSet(o||c.marks()))return n.removeStoredMark(i),e?.(n),!0}else{for(let c of a){let{$from:p,$to:u}=c;s.rangeHasMark(p.pos,u.pos,i)&&n.removeMark(p.pos,u.pos,i)}if(!n.docChanged)return!1;e?.(n.scrollIntoView())}return!1};var rn=200,W=function(){};W.prototype.append=function(t){return t.length?(t=W.from(t),!this.length&&t||t.length<rn&&this.leafAppend(t)||this.length<rn&&t.leafPrepend(this)||this.appendInner(t)):this};W.prototype.prepend=function(t){return t.length?W.from(t).append(this):this};W.prototype.appendInner=function(t){return new ml(this,t)};W.prototype.slice=function(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.length),t>=e?W.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))};W.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};W.prototype.forEach=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)};W.prototype.map=function(t,e,n){e===void 0&&(e=0),n===void 0&&(n=this.length);var r=[];return this.forEach(function(o,s){return r.push(t(o,s))},e,n),r};W.from=function(t){return t instanceof W?t:t&&t.length?new uo(t):W.empty};var uo=function(i){function t(n){i.call(this),this.values=n}i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t;var e={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(r,o){return r==0&&o==this.length?this:new t(this.values.slice(r,o))},t.prototype.getInner=function(r){return this.values[r]},t.prototype.forEachInner=function(r,o,s,l){for(var a=o;a<s;a++)if(r(this.values[a],l+a)===!1)return!1},t.prototype.forEachInvertedInner=function(r,o,s,l){for(var a=o-1;a>=s;a--)if(r(this.values[a],l+a)===!1)return!1},t.prototype.leafAppend=function(r){if(this.length+r.length<=rn)return new t(this.values.concat(r.flatten()))},t.prototype.leafPrepend=function(r){if(this.length+r.length<=rn)return new t(r.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(t.prototype,e),t}(W);W.empty=new uo([]);var ml=function(i){function t(e,n){i.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return i&&(t.__proto__=i),t.prototype=Object.create(i&&i.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},t.prototype.forEachInner=function(n,r,o,s){var l=this.left.length;if(r<l&&this.left.forEachInner(n,r,Math.min(o,l),s)===!1||o>l&&this.right.forEachInner(n,Math.max(r-l,0),Math.min(this.length,o)-l,s+l)===!1)return!1},t.prototype.forEachInvertedInner=function(n,r,o,s){var l=this.left.length;if(r>l&&this.right.forEachInvertedInner(n,r-l,Math.max(o,l)-l,s+l)===!1||o<l&&this.left.forEachInvertedInner(n,Math.min(r,l),o,s)===!1)return!1},t.prototype.sliceInner=function(n,r){if(n==0&&r==this.length)return this;var o=this.left.length;return r<=o?this.left.slice(n,r):n>=o?this.right.slice(n-o,r-o):this.left.slice(n,o).append(this.right.slice(0,r-o))},t.prototype.leafAppend=function(n){var r=this.right.leafAppend(n);if(r)return new t(this.left,r)},t.prototype.leafPrepend=function(n){var r=this.left.leafPrepend(n);if(r)return new t(r,this.right)},t.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new t(this.left,new t(this.right,n)):new t(this,n)},t}(W),si=W;var xl=500,on=class i{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let r,o;e&&(r=this.remapping(n,this.items.length),o=r.maps.length);let s=t.tr,l,a,c=[],p=[];return this.items.forEach((u,m)=>{if(!u.step){r||(r=this.remapping(n,m+1),o=r.maps.length),o--,p.push(u);return}if(r){p.push(new ce(u.map));let d=u.step.map(r.slice(o)),g;d&&s.maybeStep(d).doc&&(g=s.mapping.maps[s.mapping.maps.length-1],c.push(new ce(g,void 0,void 0,c.length+p.length))),o--,g&&r.appendMap(g,o)}else s.maybeStep(u.step);if(u.selection)return l=r?u.selection.map(r.slice(o)):u.selection,a=new i(this.items.slice(0,n).append(p.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:s,selection:l}}addTransform(t,e,n,r){let o=[],s=this.eventCount,l=this.items,a=!r&&l.length?l.get(l.length-1):null;for(let p=0;p<t.steps.length;p++){let u=t.steps[p].invert(t.docs[p]),m=new ce(t.mapping.maps[p],u,e),d;(d=a&&a.merge(m))&&(m=d,p?o.pop():l=l.slice(0,l.length-1)),o.push(m),e&&(s++,e=void 0),r||(a=m)}let c=s-n.depth;return c>vl&&(l=wl(l,c),s-=c),new i(l.append(o),s)}remapping(t,e){let n=new qt;return this.items.forEach((r,o)=>{let s=r.mirrorOffset!=null&&o-r.mirrorOffset>=t?n.maps.length-r.mirrorOffset:void 0;n.appendMap(r.map,s)},t,e),n}addMaps(t){return this.eventCount==0?this:new i(this.items.append(t.map(e=>new ce(e))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-e),o=t.mapping,s=t.steps.length,l=this.eventCount;this.items.forEach(m=>{m.selection&&l--},r);let a=e;this.items.forEach(m=>{let d=o.getMirror(--a);if(d==null)return;s=Math.min(s,d);let g=o.maps[d];if(m.step){let v=t.steps[d].invert(t.docs[d]),_=m.selection&&m.selection.map(o.slice(a+1,d));_&&l++,n.push(new ce(g,v,_))}else n.push(new ce(g))},r);let c=[];for(let m=e;m<s;m++)c.push(new ce(o.maps[m]));let p=this.items.slice(0,r).append(c).append(n),u=new i(p,l);return u.emptyItemCount()>xl&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let t=0;return this.items.forEach(e=>{e.step||t++}),t}compress(t=this.items.length){let e=this.remapping(0,t),n=e.maps.length,r=[],o=0;return this.items.forEach((s,l)=>{if(l>=t)r.push(s),s.selection&&o++;else if(s.step){let a=s.step.map(e.slice(n)),c=a&&a.getMap();if(n--,c&&e.appendMap(c,n),a){let p=s.selection&&s.selection.map(e.slice(n));p&&o++;let u=new ce(c.invert(),a,p),m,d=r.length-1;(m=r.length&&r[d].merge(u))?r[d]=m:r.push(u)}}else s.map&&n--},this.items.length,0),new i(si.from(r.reverse()),o)}};on.empty=new on(si.empty,0);function wl(i,t){let e;return i.forEach((n,r)=>{if(n.selection&&t--==0)return e=r,!1}),i.slice(e)}var ce=class i{constructor(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new i(e.getMap().invert(),e,this.selection)}}},ai=class{constructor(t,e,n,r,o){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r,this.prevComposition=o}},vl=20;function yl(i,t,e){let n=bl(t),r=ci.get(t).spec.config,o=(e?i.undone:i.done).popEvent(t,n);if(!o)return null;let s=o.selection.resolve(o.transform.doc),l=(e?i.done:i.undone).addTransform(o.transform,t.selection.getBookmark(),r,n),a=new ai(e?l:o.remaining,e?o.remaining:l,null,0,-1);return o.transform.setSelection(s).setMeta(ci,{redo:e,historyState:a})}var li=!1,fo=null;function bl(i){let t=i.plugins;if(fo!=t){li=!1,fo=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){li=!0;break}}return li}var ci=new tt("history"),yu=new tt("closeHistory");function sn(i,t){return(e,n)=>{let r=ci.getState(e);if(!r||(i?r.undone:r.done).eventCount==0)return!1;if(n){let o=yl(r,e,i);o&&n(t?o.scrollIntoView():o)}return!0}}var ho=sn(!1,!0),mo=sn(!0,!0),bu=sn(!1,!1),_u=sn(!0,!1);var xo=["top","right","bottom","left"],go=["start","end"],ui=xo.reduce((i,t)=>i.concat(t,t+"-"+go[0],t+"-"+go[1]),[]),ln=Math.min,$e=Math.max,Mt=Math.round;var se=i=>({x:i,y:i}),_l={left:"right",right:"left",bottom:"top",top:"bottom"},Cl={start:"end",end:"start"};function an(i,t){return typeof i=="function"?i(t):i}function it(i){return i.split("-")[0]}function xe(i){return i.split("-")[1]}function wo(i){return i==="x"?"y":"x"}function di(i){return i==="y"?"height":"width"}var kl=new Set(["top","bottom"]);function cn(i){return kl.has(it(i))?"y":"x"}function fi(i){return wo(cn(i))}function vo(i,t,e){e===void 0&&(e=!1);let n=xe(i),r=fi(i),o=di(r),s=r==="x"?n===(e?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=pi(s)),[s,pi(s)]}function yo(i){return i.replace(/start|end/g,t=>Cl[t])}function pi(i){return i.replace(/left|right|bottom|top/g,t=>_l[t])}function Sl(i){return P({top:0,right:0,bottom:0,left:0},i)}function bo(i){return typeof i!="number"?Sl(i):{top:i,right:i,bottom:i,left:i}}function je(i){let{x:t,y:e,width:n,height:r}=i;return{width:n,height:r,top:e,left:t,right:t+n,bottom:e+r,x:t,y:e}}function _o(i,t,e){let{reference:n,floating:r}=i,o=cn(t),s=fi(t),l=di(s),a=it(t),c=o==="y",p=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2,m=n[l]/2-r[l]/2,d;switch(a){case"top":d={x:p,y:n.y-r.height};break;case"bottom":d={x:p,y:n.y+n.height};break;case"right":d={x:n.x+n.width,y:u};break;case"left":d={x:n.x-r.width,y:u};break;default:d={x:n.x,y:n.y}}switch(xe(t)){case"start":d[s]-=m*(e&&c?-1:1);break;case"end":d[s]+=m*(e&&c?-1:1);break}return d}var Co=(i,t,e)=>ne(null,null,function*(){let{placement:n="bottom",strategy:r="absolute",middleware:o=[],platform:s}=e,l=o.filter(Boolean),a=yield s.isRTL==null?void 0:s.isRTL(t),c=yield s.getElementRects({reference:i,floating:t,strategy:r}),{x:p,y:u}=_o(c,n,a),m=n,d={},g=0;for(let v=0;v<l.length;v++){let{name:_,fn:E}=l[v],{x:B,y:z,data:q,reset:J}=yield E({x:p,y:u,initialPlacement:n,placement:m,strategy:r,middlewareData:d,rects:c,platform:s,elements:{reference:i,floating:t}});p=B??p,u=z??u,d=K(P({},d),{[_]:P(P({},d[_]),q)}),J&&g<=50&&(g++,typeof J=="object"&&(J.placement&&(m=J.placement),J.rects&&(c=J.rects===!0?yield s.getElementRects({reference:i,floating:t,strategy:r}):J.rects),{x:p,y:u}=_o(c,m,a)),v=-1)}return{x:p,y:u,placement:m,strategy:r,middlewareData:d}});function hi(i,t){return ne(this,null,function*(){var e;t===void 0&&(t={});let{x:n,y:r,platform:o,rects:s,elements:l,strategy:a}=i,{boundary:c="clippingAncestors",rootBoundary:p="viewport",elementContext:u="floating",altBoundary:m=!1,padding:d=0}=an(t,i),g=bo(d),_=l[m?u==="floating"?"reference":"floating":u],E=je(yield o.getClippingRect({element:(e=yield o.isElement==null?void 0:o.isElement(_))==null||e?_:_.contextElement||(yield o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:c,rootBoundary:p,strategy:a})),B=u==="floating"?{x:n,y:r,width:s.floating.width,height:s.floating.height}:s.reference,z=yield o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating),q=(yield o.isElement==null?void 0:o.isElement(z))?(yield o.getScale==null?void 0:o.getScale(z))||{x:1,y:1}:{x:1,y:1},J=je(o.convertOffsetParentRelativeRectToViewportRelativeRect?yield o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:B,offsetParent:z,strategy:a}):B);return{top:(E.top-J.top+g.top)/q.y,bottom:(J.bottom-E.bottom+g.bottom)/q.y,left:(E.left-J.left+g.left)/q.x,right:(J.right-E.right+g.right)/q.x}})}function El(i,t,e){return(i?[...e.filter(r=>xe(r)===i),...e.filter(r=>xe(r)!==i)]:e.filter(r=>it(r)===r)).filter(r=>i?xe(r)===i||(t?yo(r)!==r:!1):!0)}var ko=function(i){return i===void 0&&(i={}),{name:"autoPlacement",options:i,fn(e){return ne(this,null,function*(){var n,r,o;let{rects:s,middlewareData:l,placement:a,platform:c,elements:p}=e,Mi=an(i,e),{crossAxis:u=!1,alignment:m,allowedPlacements:d=ui,autoAlignment:g=!0}=Mi,v=Ii(Mi,["crossAxis","alignment","allowedPlacements","autoAlignment"]),_=m!==void 0||d===ui?El(m||null,g,d):d,E=yield hi(e,v),B=((n=l.autoPlacement)==null?void 0:n.index)||0,z=_[B];if(z==null)return{};let q=vo(z,s,yield c.isRTL==null?void 0:c.isRTL(p.floating));if(a!==z)return{reset:{placement:_[0]}};let J=[E[it(z)],E[q[0]],E[q[1]]],_n=[...((r=l.autoPlacement)==null?void 0:r.overflows)||[],{placement:z,overflows:J}],ki=_[B+1];if(ki)return{data:{index:B+1,overflows:_n},reset:{placement:ki}};let Si=_n.map(ae=>{let at=xe(ae.placement);return[ae.placement,at&&u?ae.overflows.slice(0,2).reduce((rs,ss)=>rs+ss,0):ae.overflows[0],ae.overflows]}).sort((ae,at)=>ae[1]-at[1]),Ei=((o=Si.filter(ae=>ae[2].slice(0,xe(ae[0])?2:3).every(at=>at<=0))[0])==null?void 0:o[0])||Si[0][0];return Ei!==a?{data:{index:B+1,overflows:_n},reset:{placement:Ei}}:{}})}}};var Ml=new Set(["left","top"]);function Il(i,t){return ne(this,null,function*(){let{placement:e,platform:n,elements:r}=i,o=yield n.isRTL==null?void 0:n.isRTL(r.floating),s=it(e),l=xe(e),a=cn(e)==="y",c=Ml.has(s)?-1:1,p=o&&a?-1:1,u=an(t,i),{mainAxis:m,crossAxis:d,alignmentAxis:g}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&typeof g=="number"&&(d=l==="end"?g*-1:g),a?{x:d*p,y:m*c}:{x:m*c,y:d*p}})}var So=function(i){return i===void 0&&(i=0),{name:"offset",options:i,fn(e){return ne(this,null,function*(){var n,r;let{x:o,y:s,placement:l,middlewareData:a}=e,c=yield Il(e,i);return l===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:o+c.x,y:s+c.y,data:K(P({},c),{placement:l})}})}}};function un(){return typeof window<"u"}function We(i){return Mo(i)?(i.nodeName||"").toLowerCase():"#document"}function X(i){var t;return(i==null||(t=i.ownerDocument)==null?void 0:t.defaultView)||window}function pe(i){var t;return(t=(Mo(i)?i.ownerDocument:i.document)||window.document)==null?void 0:t.documentElement}function Mo(i){return un()?i instanceof Node||i instanceof X(i).Node:!1}function ee(i){return un()?i instanceof Element||i instanceof X(i).Element:!1}function le(i){return un()?i instanceof HTMLElement||i instanceof X(i).HTMLElement:!1}function Eo(i){return!un()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof X(i).ShadowRoot}var Tl=new Set(["inline","contents"]);function rt(i){let{overflow:t,overflowX:e,overflowY:n,display:r}=te(i);return/auto|scroll|overlay|hidden|clip/.test(t+n+e)&&!Tl.has(r)}var Nl=new Set(["table","td","th"]);function Io(i){return Nl.has(We(i))}var Ol=[":popover-open",":modal"];function It(i){return Ol.some(t=>{try{return i.matches(t)}catch{return!1}})}var Rl=["transform","translate","scale","rotate","perspective"],Al=["transform","translate","scale","rotate","perspective","filter"],Pl=["paint","layout","strict","content"];function dn(i){let t=fn(),e=ee(i)?te(i):i;return Rl.some(n=>e[n]?e[n]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||Al.some(n=>(e.willChange||"").includes(n))||Pl.some(n=>(e.contain||"").includes(n))}function To(i){let t=we(i);for(;le(t)&&!Je(t);){if(dn(t))return t;if(It(t))return null;t=we(t)}return null}function fn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}var Dl=new Set(["html","body","#document"]);function Je(i){return Dl.has(We(i))}function te(i){return X(i).getComputedStyle(i)}function Tt(i){return ee(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function we(i){if(We(i)==="html")return i;let t=i.assignedSlot||i.parentNode||Eo(i)&&i.host||pe(i);return Eo(t)?t.host:t}function No(i){let t=we(i);return Je(t)?i.ownerDocument?i.ownerDocument.body:i.body:le(t)&&rt(t)?t:No(t)}function pn(i,t,e){var n;t===void 0&&(t=[]),e===void 0&&(e=!0);let r=No(i),o=r===((n=i.ownerDocument)==null?void 0:n.body),s=X(r);if(o){let l=hn(s);return t.concat(s,s.visualViewport||[],rt(r)?r:[],l&&e?pn(l):[])}return t.concat(r,pn(r,[],e))}function hn(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function Ao(i){let t=te(i),e=parseFloat(t.width)||0,n=parseFloat(t.height)||0,r=le(i),o=r?i.offsetWidth:e,s=r?i.offsetHeight:n,l=Mt(e)!==o||Mt(n)!==s;return l&&(e=o,n=s),{width:e,height:n,$:l}}function Po(i){return ee(i)?i:i.contextElement}function ot(i){let t=Po(i);if(!le(t))return se(1);let e=t.getBoundingClientRect(),{width:n,height:r,$:o}=Ao(t),s=(o?Mt(e.width):e.width)/n,l=(o?Mt(e.height):e.height)/r;return(!s||!Number.isFinite(s))&&(s=1),(!l||!Number.isFinite(l))&&(l=1),{x:s,y:l}}var zl=se(0);function Do(i){let t=X(i);return!fn()||!t.visualViewport?zl:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ll(i,t,e){return t===void 0&&(t=!1),!e||t&&e!==X(i)?!1:t}function Nt(i,t,e,n){t===void 0&&(t=!1),e===void 0&&(e=!1);let r=i.getBoundingClientRect(),o=Po(i),s=se(1);t&&(n?ee(n)&&(s=ot(n)):s=ot(i));let l=Ll(o,e,n)?Do(o):se(0),a=(r.left+l.x)/s.x,c=(r.top+l.y)/s.y,p=r.width/s.x,u=r.height/s.y;if(o){let m=X(o),d=n&&ee(n)?X(n):n,g=m,v=hn(g);for(;v&&n&&d!==g;){let _=ot(v),E=v.getBoundingClientRect(),B=te(v),z=E.left+(v.clientLeft+parseFloat(B.paddingLeft))*_.x,q=E.top+(v.clientTop+parseFloat(B.paddingTop))*_.y;a*=_.x,c*=_.y,p*=_.x,u*=_.y,a+=z,c+=q,g=X(v),v=hn(g)}}return je({width:p,height:u,x:a,y:c})}function gi(i,t){let e=Tt(i).scrollLeft;return t?t.left+e:Nt(pe(i)).left+e}function zo(i,t,e){e===void 0&&(e=!1);let n=i.getBoundingClientRect(),r=n.left+t.scrollLeft-(e?0:gi(i,n)),o=n.top+t.scrollTop;return{x:r,y:o}}function Fl(i){let{elements:t,rect:e,offsetParent:n,strategy:r}=i,o=r==="fixed",s=pe(n),l=t?It(t.floating):!1;if(n===s||l&&o)return e;let a={scrollLeft:0,scrollTop:0},c=se(1),p=se(0),u=le(n);if((u||!u&&!o)&&((We(n)!=="body"||rt(s))&&(a=Tt(n)),le(n))){let d=Nt(n);c=ot(n),p.x=d.x+n.clientLeft,p.y=d.y+n.clientTop}let m=s&&!u&&!o?zo(s,a,!0):se(0);return{width:e.width*c.x,height:e.height*c.y,x:e.x*c.x-a.scrollLeft*c.x+p.x+m.x,y:e.y*c.y-a.scrollTop*c.y+p.y+m.y}}function Bl(i){return Array.from(i.getClientRects())}function Hl(i){let t=pe(i),e=Tt(i),n=i.ownerDocument.body,r=$e(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=$e(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),s=-e.scrollLeft+gi(i),l=-e.scrollTop;return te(n).direction==="rtl"&&(s+=$e(t.clientWidth,n.clientWidth)-r),{width:r,height:o,x:s,y:l}}function Vl(i,t){let e=X(i),n=pe(i),r=e.visualViewport,o=n.clientWidth,s=n.clientHeight,l=0,a=0;if(r){o=r.width,s=r.height;let c=fn();(!c||c&&t==="fixed")&&(l=r.offsetLeft,a=r.offsetTop)}return{width:o,height:s,x:l,y:a}}var $l=new Set(["absolute","fixed"]);function jl(i,t){let e=Nt(i,!0,t==="fixed"),n=e.top+i.clientTop,r=e.left+i.clientLeft,o=le(i)?ot(i):se(1),s=i.clientWidth*o.x,l=i.clientHeight*o.y,a=r*o.x,c=n*o.y;return{width:s,height:l,x:a,y:c}}function Oo(i,t,e){let n;if(t==="viewport")n=Vl(i,e);else if(t==="document")n=Hl(pe(i));else if(ee(t))n=jl(t,e);else{let r=Do(i);n={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return je(n)}function Lo(i,t){let e=we(i);return e===t||!ee(e)||Je(e)?!1:te(e).position==="fixed"||Lo(e,t)}function Wl(i,t){let e=t.get(i);if(e)return e;let n=pn(i,[],!1).filter(l=>ee(l)&&We(l)!=="body"),r=null,o=te(i).position==="fixed",s=o?we(i):i;for(;ee(s)&&!Je(s);){let l=te(s),a=dn(s);!a&&l.position==="fixed"&&(r=null),(o?!a&&!r:!a&&l.position==="static"&&!!r&&$l.has(r.position)||rt(s)&&!a&&Lo(i,s))?n=n.filter(p=>p!==s):r=l,s=we(s)}return t.set(i,n),n}function Jl(i){let{element:t,boundary:e,rootBoundary:n,strategy:r}=i,s=[...e==="clippingAncestors"?It(t)?[]:Wl(t,this._c):[].concat(e),n],l=s[0],a=s.reduce((c,p)=>{let u=Oo(t,p,r);return c.top=$e(u.top,c.top),c.right=ln(u.right,c.right),c.bottom=ln(u.bottom,c.bottom),c.left=$e(u.left,c.left),c},Oo(t,l,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Ul(i){let{width:t,height:e}=Ao(i);return{width:t,height:e}}function ql(i,t,e){let n=le(t),r=pe(t),o=e==="fixed",s=Nt(i,!0,o,t),l={scrollLeft:0,scrollTop:0},a=se(0);function c(){a.x=gi(r)}if(n||!n&&!o)if((We(t)!=="body"||rt(r))&&(l=Tt(t)),n){let d=Nt(t,!0,o,t);a.x=d.x+t.clientLeft,a.y=d.y+t.clientTop}else r&&c();o&&!n&&r&&c();let p=r&&!n&&!o?zo(r,l):se(0),u=s.left+l.scrollLeft-a.x-p.x,m=s.top+l.scrollTop-a.y-p.y;return{x:u,y:m,width:s.width,height:s.height}}function mi(i){return te(i).position==="static"}function Ro(i,t){if(!le(i)||te(i).position==="fixed")return null;if(t)return t(i);let e=i.offsetParent;return pe(i)===e&&(e=e.ownerDocument.body),e}function Fo(i,t){let e=X(i);if(It(i))return e;if(!le(i)){let r=we(i);for(;r&&!Je(r);){if(ee(r)&&!mi(r))return r;r=we(r)}return e}let n=Ro(i,t);for(;n&&Io(n)&&mi(n);)n=Ro(n,t);return n&&Je(n)&&mi(n)&&!dn(n)?e:n||To(i)||e}var Kl=function(i){return ne(this,null,function*(){let t=this.getOffsetParent||Fo,e=this.getDimensions,n=yield e(i.floating);return{reference:ql(i.reference,yield t(i.floating),i.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}})};function Gl(i){return te(i).direction==="rtl"}var Xl={convertOffsetParentRelativeRectToViewportRelativeRect:Fl,getDocumentElement:pe,getClippingRect:Jl,getOffsetParent:Fo,getElementRects:Kl,getClientRects:Bl,getDimensions:Ul,getScale:ot,isElement:ee,isRTL:Gl};var Bo=hi,Ho=So,Vo=ko;var $o=(i,t,e)=>{let n=new Map,r=P({platform:Xl},e),o=K(P({},r.platform),{_c:n});return Co(i,t,K(P({},r),{platform:o}))};var Ql=["imgEl"],Yl=i=>({"NgxEditor__Resizer--Active":i});function Zl(i,t){if(i&1){let e=Z();x(0,"span",4)(1,"span",5),D("mousedown",function(r){L(e);let o=y();return F(o.startResizing(r,"left"))}),w(),x(2,"span",6),D("mousedown",function(r){L(e);let o=y();return F(o.startResizing(r,"right"))}),w(),x(3,"span",7),D("mousedown",function(r){L(e);let o=y();return F(o.startResizing(r,"left"))}),w(),x(4,"span",8),D("mousedown",function(r){L(e);let o=y();return F(o.startResizing(r,"right"))}),w()()}}var ea=["*"],ta=(i,t)=>({backgroundColor:i,color:t}),na=i=>({"NgxEditor__Color--Active":i});function ia(i,t){if(i&1){let e=Z();x(0,"button",7),D("mousedown",function(r){let o=L(e).$implicit,s=y(3);return F(s.onColorSelectMouseClick(r,o))})("keydown.enter",function(){let r=L(e).$implicit,o=y(3);return F(o.onColorSelectKeydown(r))})("keydown.space",function(){let r=L(e).$implicit,o=y(3);return F(o.onColorSelectKeydown(r))}),w()}if(i&2){let e=t.$implicit,n=y(3);h("ngStyle",ut(3,ta,e,n.getContrastYIQ(e)))("title",e)("ngClass",pt(6,na,n.activeColors.includes(e)))}}function ra(i,t){if(i&1&&(x(0,"div",5),T(1,ia,1,8,"button",6),w()),i&2){let e=t.$implicit,n=y(2);f(),h("ngForOf",e)("ngForTrackBy",n.trackByIndex)}}function oa(i,t){if(i&1){let e=Z();x(0,"div",2),T(1,ra,2,2,"div",3),x(2,"button",4),D("mousedown",function(r){L(e);let o=y();return F(o.onRemoveMouseClick(r))})("keydown.enter",function(){L(e);let r=y();return F(r.onRemoveKeydown())})("keydown.space",function(){L(e);let r=y();return F(r.onRemoveKeydown())}),b(3),M(4,"async"),w()()}if(i&2){let e=y();f(),h("ngForOf",e.presets)("ngForTrackBy",e.trackByIndex),f(),h("disabled",!e.isActive),f(),Q(" ",I(4,4,e.getLabel("remove"))," ")}}var sa=(i,t)=>({"NgxEditor__Dropdown--Active":i,"NgxEditor--Disabled":t});function la(i,t){if(i&1){let e=Z();x(0,"button",4),M(1,"async"),D("mousedown",function(r){let o=L(e).$implicit,s=y(2);return F(s.onDropdownItemMouseClick(r,o))})("keydown.enter",function(r){let o=L(e).$implicit,s=y(2);return F(s.onDropdownItemKeydown(r,o))})("keydown.space",function(r){let o=L(e).$implicit,s=y(2);return F(s.onDropdownItemKeydown(r,o))}),b(2),M(3,"async"),w()}if(i&2){let e=t.$implicit,n=y(2);h("ngClass",ut(8,sa,e===n.activeItem,n.disabledItems.includes(e)))("ariaLabel",I(1,4,n.getName(e))),Vi("aria-selected",e===n.activeItem),f(2),Q(" ",I(3,6,n.getName(e))," ")}}function aa(i,t){if(i&1&&(x(0,"div",2),T(1,la,4,11,"button",3),w()),i&2){let e=y();f(),h("ngForOf",e.items)("ngForTrackBy",e.trackByIndex)}}function ca(i,t){if(i&1&&(x(0,"div",12),b(1),M(2,"async"),w()),i&2){let e=y(2);f(),Q(" ",I(2,1,(e.src.errors==null?null:e.src.errors.pattern)&&e.getLabel("enterValidUrl"))," ")}}function pa(i,t){if(i&1){let e=Z();x(0,"div",2)(1,"form",3),D("ngSubmit",function(r){L(e);let o=y();return F(o.insertLink(r))}),x(2,"div",4)(3,"div",5)(4,"label",6),b(5),M(6,"async"),w(),N(7,"input",7),T(8,ca,3,3,"div",8),w()(),x(9,"div",4)(10,"div",5)(11,"label",6),b(12),M(13,"async"),w(),N(14,"input",9),w()(),x(15,"div",4)(16,"div",5)(17,"label",6),b(18),M(19,"async"),w(),N(20,"input",10),w()(),x(21,"button",11),b(22),M(23,"async"),w()()()}if(i&2){let e=y();f(),h("formGroup",e.form),f(3),h("htmlFor",e.getId("image-popup-url")),f(),V(I(6,13,e.getLabel("url"))),f(2),h("id",e.getId("image-popup-url")),f(),h("ngIf",e.src.touched&&e.src.invalid),f(3),h("htmlFor",e.getId("image-popup-label")),f(),V(I(13,15,e.getLabel("altText"))),f(2),h("id",e.getId("image-popup-label")),f(3),h("htmlFor",e.getId("image-popup-title")),f(),V(I(19,17,e.getLabel("title"))),f(2),h("id",e.getId("image-popup-title")),f(),h("disabled",!e.form.valid||!e.form.dirty),f(),V(I(23,19,e.getLabel("insert")))}}function ua(i,t){if(i&1&&(x(0,"div",12),b(1),M(2,"async"),w()),i&2){let e=y(2);f(),Q(" ",I(2,1,(e.href.errors==null?null:e.href.errors.pattern)&&e.getLabel("enterValidUrl"))," ")}}function da(i,t){if(i&1&&(x(0,"div",12),b(1),w()),i&2){let e=y(2);f(),Q(" ",(e.text.errors==null?null:e.text.errors.required)&&"This is required"," ")}}function fa(i,t){if(i&1&&(x(0,"div",4)(1,"div",5)(2,"label"),N(3,"input",13),b(4),M(5,"async"),w()()()),i&2){let e=y(2);f(4),Q(" ",I(5,1,e.getLabel("openInNewTab"))," ")}}function ha(i,t){if(i&1){let e=Z();x(0,"div",2)(1,"form",3),D("ngSubmit",function(r){L(e);let o=y();return F(o.insertLink(r))}),x(2,"div",4)(3,"div",5)(4,"label",6),b(5),M(6,"async"),w(),N(7,"input",7),T(8,ua,3,3,"div",8),w()(),x(9,"div",4)(10,"div",5)(11,"label",6),b(12),M(13,"async"),w(),N(14,"input",9),T(15,da,2,1,"div",8),w()(),T(16,fa,6,3,"div",10),x(17,"button",11),b(18),M(19,"async"),w()()()}if(i&2){let e=y();f(),h("formGroup",e.form),f(3),h("htmlFor",e.getId("link-popup-url")),f(),V(I(6,12,e.getLabel("url"))),f(2),h("id",e.getId("link-popup-url")),f(),h("ngIf",e.href.touched&&e.href.invalid),f(3),h("htmlFor",e.getId("link-popup-label")),f(),V(I(13,14,e.getLabel("text"))),f(2),h("id",e.getId("link-popup-label")),f(),h("ngIf",e.text.touched&&e.text.invalid),f(),h("ngIf",e.options.showOpenInNewTab),f(),h("disabled",!e.form.valid),f(),V(I(19,16,e.getLabel("insert")))}}var ma=(i,t)=>({"NgxEditor--Disabled":i,"NgxEditor__MenuBar--Reverse":t});function ga(i,t){if(i&1&&N(0,"ngx-toggle-command",7),i&2){let e=y().$implicit,n=y(2);he(n.iconContainerClass),h("toolbarItem",e)}}function xa(i,t){if(i&1&&N(0,"ngx-insert-command",7),i&2){let e=y().$implicit,n=y(2);he(n.iconContainerClass),h("toolbarItem",e)}}function wa(i,t){if(i&1&&(de(0),N(1,"ngx-link",8),fe()),i&2){let e=y().$implicit,n=y(2);f(),he(n.iconContainerClass),h("options",n.getLinkOptions(e))}}function va(i,t){if(i&1&&N(0,"ngx-image"),i&2){let e=y(3);he(e.iconContainerClass)}}function ya(i,t){if(i&1&&N(0,"ngx-dropdown",10),i&2){let e=t.$implicit,n=y(4);he(n.dropdownContainerClass),h("group",e.key)("items",e.value)}}function ba(i,t){if(i&1&&(de(0),T(1,ya,1,4,"ngx-dropdown",9),M(2,"keyvalue"),fe()),i&2){let e=y().$implicit,n=y(2);f(),h("ngForOf",I(2,2,n.getDropdownItems(e)))("ngForTrackBy",n.trackByIndex)}}function _a(i,t){if(i&1&&N(0,"ngx-color-picker",11),i&2){let e=y(3);he(e.iconContainerClass),h("presets",e.presets)}}function Ca(i,t){if(i&1&&N(0,"ngx-color-picker",12),i&2){let e=y(3);he(e.iconContainerClass),h("presets",e.presets)}}function ka(i,t){if(i&1&&N(0,"div"),i&2){let e=y(3);he(e.seperatorClass)}}function Sa(i,t){if(i&1&&(de(0),T(1,ga,1,3,"ngx-toggle-command",3)(2,xa,1,3,"ngx-insert-command",3)(3,wa,2,3,"ng-container",2)(4,va,1,2,"ngx-image",4)(5,ba,3,4,"ng-container",2)(6,_a,1,3,"ngx-color-picker",5)(7,Ca,1,3,"ngx-color-picker",6)(8,ka,1,2,"div",4),fe()),i&2){let e=t.$implicit,n=t.last,r=y().last,o=y();f(),h("ngIf",o.toggleCommands.includes(e)),f(),h("ngIf",o.insertCommands.includes(e)),f(),h("ngIf",o.isLinkItem(e)),f(),h("ngIf",e==="image"),f(),h("ngIf",o.isDropDown(e)),f(),h("ngIf",e==="text_color"),f(),h("ngIf",e==="background_color"),f(),h("ngIf",n&&!r)}}function Ea(i,t){if(i&1&&(de(0),T(1,Sa,9,8,"ng-container",1),fe()),i&2){let e=t.$implicit,n=y();f(),h("ngForOf",e)("ngForTrackBy",n.trackByIndex)}}function Ma(i,t){if(i&1&&(de(0),$i(1,13),fe()),i&2){let e=y();f(),h("ngTemplateOutlet",e.customMenuRef)}}var Ia=(i,t)=>({"NgxBubbleMenu__Icon--Active":i,"NgxEditor--Disabled":t});function Ta(i,t){if(i&1){let e=Z();x(0,"button",3),M(1,"async"),D("mousedown",function(r){L(e);let o=y().$implicit,s=y(2);return F(s.onClick(r,o))}),w()}if(i&2){let e=y().$implicit,n=y(2);h("ngClass",ut(5,Ia,n.activeItems.includes(e),!n.execulableItems.includes(e)))("title",I(1,3,n.getTitle(e)))("innerHTML",n.getIcon(e),Oe)}}function Na(i,t){i&1&&N(0,"div",4)}function Oa(i,t){if(i&1&&(de(0),T(1,Ta,2,8,"button",1)(2,Na,1,0,"div",2),fe()),i&2){let e=t.$implicit,n=t.last,r=y().last,o=y();f(),h("ngIf",o.toggleCommands.includes(e)),f(),h("ngIf",n&&!r)}}function Ra(i,t){if(i&1&&(de(0),T(1,Oa,3,2,"ng-container",0),fe()),i&2){let e=t.$implicit,n=y();f(),h("ngForOf",e)("ngForTrackBy",n.trackByIndex)}}function Aa(i,t){if(i&1&&(de(0),N(1,"ngx-bubble",2),fe()),i&2){let e=y();f(),h("editor",e.editor)}}var Pa=()=>{if(!(typeof window>"u"))return window.trustedTypes},Da=i=>Pa()?.isHTML(i)??!1;var za=(()=>{class i{src;alt="";title="";outerWidth="";selected=!1;view;imageResize=new Hi;imgEl;startResizing(e,n){e.preventDefault(),this.resizeImage(e,n)}resizeImage(e,n){let r=e.pageX,o=this.imgEl.nativeElement.clientWidth,s=n==="left",{width:l}=window.getComputedStyle(this.view.dom),a=parseInt(l,10),c=u=>{let d=u.pageX-r,g=s?o-d:o+d;g>a||g<20||(this.outerWidth=`${g}px`)},p=u=>{u.preventDefault(),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",p),this.imageResize.emit()};document.addEventListener("mousemove",c),document.addEventListener("mouseup",p)}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=O({type:i,selectors:[["ngx-image-view"]],viewQuery:function(n,r){if(n&1&&Ji(Ql,7),n&2){let o;Ui(o=qi())&&(r.imgEl=o.first)}},inputs:{src:"src",alt:"alt",title:"title",outerWidth:"outerWidth",selected:"selected",view:"view"},outputs:{imageResize:"imageResize"},decls:4,vars:9,consts:[["imgEl",""],[1,"NgxEditor__ImageWrapper",3,"ngClass"],["class","NgxEditor__ResizeHandle",4,"ngIf"],[3,"src","alt","title"],[1,"NgxEditor__ResizeHandle"],[1,"NgxEditor__ResizeHandle--TL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--TR",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BR",3,"mousedown"]],template:function(n,r){n&1&&(x(0,"span",1),T(1,Zl,5,0,"span",2),N(2,"img",3,0),w()),n&2&&(Gi("width",r.outerWidth),h("ngClass",pt(7,Yl,r.selected)),f(),h("ngIf",r.selected),f(),h("src",r.src,ye)("alt",r.alt)("title",r.title))},dependencies:[H,be,U],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}img[_ngcontent-%COMP%]{width:100%;height:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active[_ngcontent-%COMP%]{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%]{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%]{bottom:-5px;left:-5px;cursor:sw-resize}"]})}return i})();var Me=(()=>{class i{sanitizer;constructor(e){this.sanitizer=e}transform(e){return Da(e)?e:this.sanitizer.bypassSecurityTrustHtml(e)}static \u0275fac=function(n){return new(n||i)(S(cr,16))};static \u0275pipe=Bi({name:"sanitizeHtml",type:i,pure:!0})}return i})(),ve=class{name;constructor(t){this.name=t}apply(){return(t,e)=>{let{schema:n}=t,r=n.marks[this.name];return r?oi(r)(t,e):!1}}toggle(){return(t,e)=>{let{schema:n}=t,r=n.marks[this.name];return r?ti(r)(t,e):!1}}isActive(t){let{schema:e}=t,n=e.marks[this.name];return n?nn(t,n):!1}canExecute(t){return this.toggle()(t)}},xi=class{toggle(){return(t,e)=>{let{schema:n}=t,r=n.nodes.blockquote;return r?this.isActive(t)?Yr(t,e):so(r)(t,e):!1}}isActive(t){let{schema:e}=t,n=e.nodes.blockquote;return n?ni(t,n):!1}canExecute(t){return this.toggle()(t)}},wi=class{insert(){return(t,e)=>{let{schema:n,tr:r}=t,o=n.nodes.horizontal_rule;return o?(e(r.replaceSelectionWith(o.create()).scrollIntoView()),!0):!1}}canExecute(t){return ao(t,t.schema.nodes.horizontal_rule)}},gn=class{isBulletList=!1;constructor(t=!1){this.isBulletList=t}getType(t){return this.isBulletList?t.nodes.bullet_list:t.nodes.ordered_list}toggle(){return(t,e)=>{let{schema:n}=t,r=this.getType(n);return r?this.isActive(t)?qr(n.nodes.list_item)(t,e):Ur(r)(t,e):!1}}isActive(t){let{schema:e}=t,n=this.getType(e);return n?ni(t,n):!1}canExecute(t){return this.toggle()(t)}},Ie=class{level;constructor(t){this.level=t}apply(){return(t,e)=>{let{schema:n}=t,r=n.nodes.heading;return r?en(r)(t,e):!1}}toggle(){return(t,e)=>{let{schema:n,selection:r,doc:o}=t,s=n.nodes.heading;if(!s)return!1;let l=r.$from.before(1),c=o.nodeAt(l)?.attrs??{};return this.isActive(t)?en(n.nodes.paragraph,c)(t,e):en(s,K(P({},c),{level:this.level}))(t,e)}}isActive(t){let{schema:e}=t,n=ii(t),r=e.nodes.heading;if(!r)return!1;let o=[r,e.nodes.text,e.nodes.blockquote];return!!n.filter(a=>o.includes(a.type)).find(a=>a.attrs.level===this.level)}canExecute(t){return this.toggle()(t)}},st=class{align;constructor(t){this.align=t}toggle(){return(t,e)=>{let{doc:n,selection:r,tr:o,schema:s}=t,{from:l,to:a}=r,c=!1;return n.nodesBetween(l,a,(p,u)=>{let m=p.type;if([s.nodes.paragraph,s.nodes.heading].includes(m)){c=!0;let d=p.attrs.align===this.align?null:this.align;o.setNodeMarkup(u,m,K(P({},p.attrs),{align:d}))}return!0}),c?(o.docChanged&&e?.(o),!0):!1}}isActive(t){return!!ii(t).find(r=>r.attrs.align===this.align)}canExecute(t){return this.toggle()(t)}},La={strict:!0},Fa=class{update(t){return(e,n)=>{let{schema:r,selection:o}=e,s=r.marks.link;return!s||o.empty?!1:ti(s,t)(e,n)}}insert(t,e){return(n,r)=>{let{schema:o,tr:s}=n;if(!o.marks.link)return!1;let a={href:e.href,title:e.title??t,target:e.target??"_blank"},c=o.text(t,[o.marks.link.create(a)]);return s.replaceSelectionWith(c,!1).scrollIntoView(),s.docChanged?(r?.(s),!0):!1}}isActive(t,e=La){if(e.strict)return!0;let{schema:n}=t,r=n.marks.link;return r?nn(t,r):!1}remove(t,e){return co()(t,e)}canExecute(t){let e={href:""};return this.insert("Exec",e)(t)||this.update(e)(t)}},Ba=class{insert(t,e){return(n,r)=>{let{schema:o,tr:s,selection:l}=n,a=o.nodes.image;if(!a)return!1;let c=P({width:null,src:t},e);!c.width&&l instanceof A&&l.node.type===a&&(c.width=l.node.attrs.width),s.replaceSelectionWith(a.createAndFill(c));let p=s.doc.resolve(s.selection.anchor-s.selection.$anchor.nodeBefore.nodeSize);return s.setSelection(new A(p)).scrollIntoView(),s.docChanged?(r?.(s),!0):!1}}isActive(t){let{selection:e}=t;return e instanceof A?e.node.type.name==="image":!1}},Xo=class{name;attrName;constructor(t,e="color"){this.name=t,this.attrName=e}apply(t){return(e,n)=>{let{schema:r,selection:o,doc:s}=e,l=r.marks[this.name];if(!l)return!1;let{from:a,to:c,empty:p}=o;if(!p&&a+1===c){let u=s.nodeAt(a);if(u?.isAtom&&!u.isText&&u.isLeaf)return!1}return oi(l,t)(e,n)}}isActive(t){let{schema:e}=t,n=e.marks[this.name];return n?nn(t,n):!1}getActiveColors(t){if(!this.isActive(t))return[];let{schema:e}=t;return lo(t).filter(o=>o.type===e.marks[this.name]).map(o=>o.attrs[this.attrName]).filter(Boolean)}remove(){return(t,e)=>{let{schema:n}=t,r=n.marks[this.name];return r?po(r)(t,e):!1}}canExecute(t){let e=this.name==="text_color"?{color:""}:{backgroundColor:""};return this.apply(e)(t)}},Ha=["link"],vi=class{insert(){return(t,e)=>{let{tr:n}=t,{ranges:r,empty:o}=n.selection;return o||(Object.entries(t.schema.marks).forEach(([s,l])=>{Ha.includes(s)||r.forEach(a=>{n.removeMark(a.$from.pos,a.$to.pos,l)})}),e(n)),!0}}canExecute(){return!0}},Va=["paragraph","heading","blockquote"],jo=0,Wo=10,$a=(i,t,e)=>{let n=i.doc.nodeAt(t);if(!n)return!1;let r=n.attrs.indent??0,o=br(r+(e==="increase"?1:-1),jo,Wo);if(o===r||o<jo||o>Wo)return!1;let s=K(P({},n.attrs),{indent:o});return i.setNodeMarkup(t,n.type,s),!0},xn=class{method="increase";constructor(t){this.method=t}insert(){return(t,e)=>{let{tr:n,doc:r}=t,{from:o,to:s}=n.selection,l=!1;return r.nodesBetween(o,s,(a,c)=>{let p=a.type;return Va.includes(p.name)?(l=$a(n,c,this.method),!1):!a.type.name.includes("list")}),l?(n.docChanged&&e?.(n),!0):!1}}canExecute(t){return this.insert()(t)}},wn=class{mode="undo";constructor(t){this.mode=t}insert(){return(t,e)=>this.mode==="undo"?ho(t,e):mo(t,e)}canExecute(t){return this.insert()(t)}},ja=new ve("strong"),Wa=new ve("em"),Ja=new ve("code"),Ua=new ve("u"),qa=new ve("s"),Ka=new xi,Ga=new wi,Xa=new vi,Qa=new gn(!0),Ya=new gn(!1),Za=new Ie(1),ec=new Ie(2),tc=new Ie(3),nc=new Ie(4),ic=new Ie(5),rc=new Ie(6),oc=new st("left"),sc=new st("center"),lc=new st("right"),ac=new st("justify"),cc=new Fa,pc=new Ba,uc=new Xo("text_color","color"),dc=new Xo("text_background_color","backgroundColor"),fc=new xn("increase"),hc=new xn("decrease"),mc=new ve("sup"),gc=new ve("sub"),xc=new wn("undo"),wc=new wn("redo"),lt={bold:ja,italic:Wa,code:Ja,underline:Ua,strike:qa,blockquote:Ka,bullet_list:Qa,ordered_list:Ya,h1:Za,h2:ec,h3:tc,h4:nc,h5:ic,h6:rc,align_left:oc,align_center:sc,align_right:lc,align_justify:ac,superscript:mc,subscript:gc},Jo={horizontal_rule:Ga,format_clear:Xa,indent:fc,outdent:hc,undo:xc,redo:wc},Ot=cc,Uo=pc,vc=uc,yc=dc,Te=(()=>{class i{editor;customMenuRefChange=new Ti;setCustomMenuRef(e){this.customMenuRefChange.next(e)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),yi={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",indent:"Increase Indent",outdent:"Decrease Indent",superscript:"Superscript",subscript:"Subscript",undo:"Undo",redo:"Redo",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove",enterValidUrl:"Please enter a valid URL"},bi=class{locals=yi;constructor(t={}){this.locals=P(P({},yi),t)}get=t=>{let e=this.locals[t];return e?Oi(e)?e:Cn(e):Cn("")}},bc=`
  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />
`,_c=`
  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />
`,Cc=`
<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
`,kc=`
<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>
`,Sc=`
<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>
`,Ec=`
<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>
`,Mc=`
<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>
`,Ic=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>
`,Tc=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
`,Nc=`
<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>
`,Oc=`
<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
`,Rc=`
<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>
`,Ac=`
<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>
`,Pc=`
<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>
`,Dc=`
<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>
`,zc=`
<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>
`,Lc=`
<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>
`,Fc=`
  <g>
    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>
    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>
  </g>
`,Bc=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>
`,Hc='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',Vc='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',$c='<g><rect fill="none" height="20" width="20"/><path d="M17,6l-1,0v1h2v1l-3,0V6c0-0.55,0.45-1,1-1l1,0l0-1h-2V3l2,0c0.55,0,1,0.45,1,1v1C18,5.55,17.55,6,17,6z M5.63,16h1.9 l2.43-3.87h0.08L12.47,16h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,6h-1.9l3.09,4.8L5.63,16z"/></g>',jc='<g><rect fill="none" height="20" width="20"/><path d="M17,15l-1,0v1h2v1h-3v-2c0-0.55,0.45-1,1-1l1,0l0-1h-2v-1l2,0c0.55,0,1,0.45,1,1v1C18,14.55,17.55,15,17,15z M5.63,14h1.9 l2.43-3.87h0.08L12.47,14h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,4h-1.9l3.09,4.8L5.63,14z"/></g>',Wc='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/>',Jc='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/>',Uc=20,qc=20,Kc="currentColor",Qo={bold:bc,italic:_c,code:Cc,underline:kc,strike:Sc,ordered_list:Ec,bullet_list:Mc,blockquote:Ic,link:Tc,unlink:Nc,image:Oc,align_left:Rc,align_center:Ac,align_right:Pc,align_justify:Dc,text_color:zc,color_fill:Lc,horizontal_rule:Fc,format_clear:Bc,indent:Hc,outdent:Vc,superscript:$c,subscript:jc,undo:Wc,redo:Jc,path:"<path></path>"},_i=class{static get(t,e=Kc){let n=Qo[t];return n&&(n.includes("<path")||n.includes("<g"))?`
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill=${e}
          height=${Uc}
          width=${qc}
        >
          ${n}
        </svg>
      `:n}},Ci=(()=>{class i{locals={};icons={};static \u0275fac=function(n){return new(n||i)};static \u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),Ne=(()=>{class i{config;constructor(e){this.config=e}get locals(){return new bi(this.config.locals)}getIcon(e){return this.config.icons[e]?this.config.icons[e]:_i.get(e)}static \u0275fac=function(n){return new(n||i)(Li(Ci,8))};static \u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),qo=i=>({locals:i.locals??{},icons:i.icons??{}}),Yo=(()=>{class i{el;menuService;ngxeService;presets;type;constructor(e,n,r){this.el=e,this.menuService=n,this.ngxeService=r}get title(){return this.getLabel(this.type==="text_color"?"text_color":"background_color")}get icon(){return this.ngxeService.getIcon(this.type==="text_color"?"text_color":"color_fill")}get command(){return this.type==="text_color"?vc:yc}updateSubscription;editorView;showPopup=!1;isActive=!1;activeColors=[];canExecute=!0;getContrastYIQ(e){let n=e.replace("#",""),r=parseInt(n.substring(0,2),16),o=parseInt(n.substring(2,4),16),s=parseInt(n.substring(4,6),16);return(r*299+o*587+s*114)/1e3>=128?"black":"white"}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hidePopup()}hidePopup(){this.showPopup=!1}togglePopup(){this.showPopup=!this.showPopup}onTogglePopupMouseClick(e){e.preventDefault(),e.button===0&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}remove(){let{state:e,dispatch:n}=this.editorView;this.command.remove()(e,n),this.hidePopup()}onRemoveMouseClick(e){e.preventDefault(),e.button===0&&(e.preventDefault(),this.remove())}onRemoveKeydown(){this.remove()}trackByIndex(e){return e}selectColor(e){let{state:n,dispatch:r}=this.editorView;if(this.type==="text_color"){let o={color:e};this.command.apply(o)(n,r)}else{let o={backgroundColor:e};this.command.apply(o)(n,r)}this.editorView.hasFocus()||this.editorView.focus(),this.hidePopup()}onColorSelectMouseClick(e,n){e.preventDefault(),e.button===0&&this.selectColor(n)}onColorSelectKeydown(e){this.selectColor(e)}update=e=>{let{state:n}=e;this.canExecute=this.command.canExecute(n),this.isActive=this.command.isActive(n),this.activeColors=[],this.isActive&&(this.activeColors=this.command.getActiveColors(n))};getLabel(e){return this.ngxeService.locals.get(e)}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||i)(S(qe),S(Te),S(Ne))};static \u0275cmp=O({type:i,selectors:[["ngx-color-picker"]],hostBindings:function(n,r){n&1&&D("mousedown",function(s){return r.onDocumentClick(s)},ue)},inputs:{presets:"presets",type:"type"},decls:5,vars:15,consts:[["type","button",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],["class","NgxEditor__ColorContainer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__MenuItem--Button",3,"mousedown","keydown.enter","keydown.space","disabled"],[1,"NgxEditor__ColorContainer"],["class","NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown","keydown.enter","keydown.space",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Color",3,"mousedown","keydown.enter","keydown.space","ngStyle","title","ngClass"]],template:function(n,r){n&1&&(x(0,"button",0),M(1,"sanitizeHtml"),M(2,"async"),M(3,"async"),D("mousedown",function(s){return r.onTogglePopupMouseClick(s)})("keydown.enter",function(){return r.onTogglePopupKeydown()})("keydown.space",function(){return r.onTogglePopupKeydown()}),w(),T(4,oa,5,6,"div",1)),n&2&&(Re("NgxEditor__MenuItem--Active",r.isActive||r.showPopup)("NgxEditor--Disabled",!r.canExecute),h("disabled",!r.canExecute)("innerHTML",I(1,9,r.icon),Oe)("title",I(2,11,r.title))("ariaLabel",I(3,13,r.title)),f(4),h("ngIf",r.showPopup))},dependencies:[_e,H,be,Ae,U,tr,Me],styles:['@charset "UTF-8";.NgxEditor__Popup[_ngcontent-%COMP%]{width:230px}.NgxEditor__ColorContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.NgxEditor__ColorContainer[_ngcontent-%COMP%] + .NgxEditor__ColorContainer[_ngcontent-%COMP%]{margin-top:5px}.NgxEditor__Color[_ngcontent-%COMP%]{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color[_ngcontent-%COMP%]:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color);outline-offset:1px}.NgxEditor__Color--Active[_ngcontent-%COMP%]:after{content:"\\2714";font-size:90%}.NgxEditor__MenuItem--Button[_ngcontent-%COMP%]{margin-top:5px}']})}return i})(),Zo=(()=>{class i{ngxeService;menuService;el;editorView;updateSubscription;group;items;isDropdownOpen=!1;disabledItems=[];activeItem;constructor(e,n,r){this.ngxeService=e,this.menuService=n,this.el=r}get isSelected(){return!!(this.activeItem||this.isDropdownOpen)}get isDropdownDisabled(){return this.disabledItems.length===this.items.length}onDocumentClick(e){!this.el.nativeElement.contains(e)&&this.isDropdownOpen&&(this.isDropdownOpen=!1)}getName(e){return this.ngxeService.locals.get(e)}getIsDropdownActive(e){return this.activeItem===e}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}onToggleDropdownMouseClick(e){e.preventDefault(),e.button===0&&this.toggleDropdown()}onToggleDropdownKeydown(){this.toggleDropdown()}trackByIndex(e){return e}selectItem(e){let n=lt[e],{state:r,dispatch:o}=this.editorView;n.toggle()(r,o),this.isDropdownOpen=!1}onDropdownItemMouseClick(e,n){e.preventDefault(),e.button===0&&this.selectItem(n)}onDropdownItemKeydown(e,n){e.preventDefault(),this.selectItem(n)}update=e=>{let{state:n}=e;this.disabledItems=[];let r=[];this.items.forEach(o=>{let s=lt[o];s.isActive(n)&&r.push(o),s.canExecute(n)||this.disabledItems.push(o)}),r.length===1?[this.activeItem]=r:this.activeItem=null};ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||i)(S(Ne),S(Te),S(qe))};static \u0275cmp=O({type:i,selectors:[["ngx-dropdown"]],hostBindings:function(n,r){n&1&&D("mousedown",function(s){return r.onDocumentClick(s.target)},ue)},inputs:{group:"group",items:"items"},decls:5,vars:13,consts:[["type","button","aria-haspopup","listbox",1,"NgxEditor__Dropdown--Text",3,"mousedown","keydown.enter","keydown.space","disabled","ariaLabel","ariaExpanded"],["class","NgxEditor__Dropdown--DropdownMenu","role","listbox",4,"ngIf"],["role","listbox",1,"NgxEditor__Dropdown--DropdownMenu"],["type","button","class","NgxEditor__Dropdown--Item","role","option",3,"ngClass","ariaLabel","mousedown","keydown.enter","keydown.space",4,"ngFor","ngForOf","ngForTrackBy"],["type","button","role","option",1,"NgxEditor__Dropdown--Item",3,"mousedown","keydown.enter","keydown.space","ngClass","ariaLabel"]],template:function(n,r){n&1&&(x(0,"button",0),M(1,"async"),D("mousedown",function(s){return r.onToggleDropdownMouseClick(s)})("keydown.enter",function(){return r.onToggleDropdownKeydown()})("keydown.space",function(){return r.onToggleDropdownKeydown()}),b(2),M(3,"async"),w(),T(4,aa,2,2,"div",1)),n&2&&(Re("NgxEditor__Dropdown--Selected",r.isSelected)("NgxEditor--Disabled",r.isDropdownDisabled),h("disabled",r.isDropdownDisabled)("ariaLabel",I(1,9,r.getName(r.activeItem||r.group)))("ariaExpanded",r.isDropdownOpen),f(2),Q(" ",I(3,11,r.getName(r.activeItem||r.group)),`
`),f(2),h("ngIf",r.isDropdownOpen))},dependencies:[_e,H,be,Ae,U],encapsulation:2})}return i})(),es=(()=>{class i{el;ngxeService;menuService;showPopup=!1;isActive=!1;componentId=zn();updateSubscription;form=new An({src:new Pe("",[Xe.required,Xe.pattern(`(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#
\r]*)?#?([^
\r]*)`)]),alt:new Pe(""),title:new Pe("")});editorView;constructor(e,n,r){this.el=e,this.ngxeService=n,this.menuService=r}get icon(){return this.ngxeService.getIcon("image")}get src(){return this.form.get("src")}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hideForm()}getId(e){return`${e}-${this.componentId}`}getLabel(e){return this.ngxeService.locals.get(e)}hideForm(){this.showPopup=!1,this.form.reset({src:"",alt:"",title:""})}togglePopup(){this.showPopup=!this.showPopup,this.showPopup&&this.fillForm()}onTogglePopupMouseClick(e){e.button===0&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}fillForm(){let{state:e}=this.editorView,{selection:n}=e;if(n instanceof A&&this.isActive){let{src:r,alt:o="",title:s=""}=n.node.attrs;this.form.setValue({src:r,alt:o,title:s})}}update=e=>{let{state:n}=e;this.isActive=Uo.isActive(n)};insertLink(e){e.preventDefault();let{src:n,alt:r,title:o}=this.form.getRawValue(),{dispatch:s,state:l}=this.editorView,a={alt:r,title:o};Uo.insert(n,a)(l,s),this.editorView.focus(),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||i)(S(qe),S(Ne),S(Te))};static \u0275cmp=O({type:i,selectors:[["ngx-image"]],hostBindings:function(n,r){n&1&&D("mousedown",function(s){return r.onDocumentClick(s)},ue)},decls:5,vars:13,consts:[["type","button","aria-haspopup","dialog",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","innerHTML","title","ariaLabel","ariaExpanded"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"ngSubmit","formGroup"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label",3,"htmlFor"],["type","url","formControlName","src","autocomplete","off",3,"id"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","alt","autocomplete","off",3,"id"],["type","text","formControlName","title","autocomplete","off",3,"id"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(n,r){n&1&&(x(0,"button",0),M(1,"sanitizeHtml"),M(2,"async"),M(3,"async"),D("mousedown",function(s){return r.onTogglePopupMouseClick(s)})("keydown.enter",function(){return r.onTogglePopupKeydown()})("keydown.space",function(){return r.onTogglePopupKeydown()}),w(),T(4,pa,24,21,"div",1)),n&2&&(Re("NgxEditor__MenuItem--Active",r.isActive||r.showPopup),h("innerHTML",I(1,7,r.icon),Oe)("title",I(2,9,r.getLabel("insertImage")))("ariaLabel",I(3,11,r.getLabel("insertImage")))("ariaExpanded",r.showPopup),f(4),h("ngIf",r.showPopup))},dependencies:[_e,Me,Dt,gt,ft,ht,mt,Pn,Dn,H,U],encapsulation:2})}return i})(),Gc=(()=>{class i{ngxeService;menuService;toolbarItem;get name(){return this.toolbarItem}html;editorView;disabled=!1;updateSubscription;constructor(e,n){this.ngxeService=e,this.menuService=n}onMouseClick(e){e.preventDefault(),e.button===0&&this.insert()}onKeydown(){this.insert()}insert(){let{state:e,dispatch:n}=this.editorView;Jo[this.name].insert()(e,n)}update=e=>{let{state:n}=e,r=Jo[this.name];this.disabled=!r.canExecute(n)};getTitle(e){return this.ngxeService.locals.get(e)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||i)(S(Ne),S(Te))};static \u0275cmp=O({type:i,selectors:[["ngx-insert-command"]],inputs:{toolbarItem:"toolbarItem"},decls:4,vars:12,consts:[["type","button",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"]],template:function(n,r){n&1&&(ie(0,"button",0),M(1,"sanitizeHtml"),M(2,"async"),M(3,"async"),On("mousedown",function(s){return r.onMouseClick(s)})("keydown.enter",function(){return r.onKeydown()})("keydown.space",function(){return r.onKeydown()}),re()),n&2&&(Re("NgxEditor--Disabled",r.disabled),Nn("disabled",r.disabled)("innerHTML",I(1,6,r.html),Oe)("title",I(2,8,r.getTitle(r.name)))("ariaLabel",I(3,10,r.getTitle(r.name))))},dependencies:[_e,Me],encapsulation:2})}return i})(),Ko={showOpenInNewTab:!0},ts=(()=>{class i{el;ngxeService;menuService;options=Ko;showPopup=!1;isActive=!1;canExecute=!0;componentId=zn();form;editorView;updateSubscription;constructor(e,n,r){this.el=e,this.ngxeService=n,this.menuService=r}get icon(){return this.ngxeService.getIcon(this.isActive?"unlink":"link")}get title(){return this.ngxeService.locals.get(this.isActive?"removeLink":"insertLink")}get href(){return this.form.get("href")}get text(){return this.form.get("text")}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hidePopup()}getId(e){return`${e}-${this.componentId}`}getLabel(e){return this.ngxeService.locals.get(e)}hidePopup(){this.showPopup=!1,this.form.reset({href:"",text:"",openInNewTab:!0}),this.text.enable()}togglePopup(){let{state:e,dispatch:n}=this.editorView;if(this.isActive){Ot.remove(e,n);return}this.showPopup=!this.showPopup,this.showPopup&&this.setText()}onTogglePopupMouseClick(e){e.button===0&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}setText=()=>{let{state:{selection:e,doc:n}}=this.editorView,{empty:r,from:o,to:s}=e,l=r?"":n.textBetween(o,s);l&&(this.text.patchValue(l),this.text.disable())};update=e=>{let{state:n}=e;this.isActive=Ot.isActive(n,{strict:!1}),this.canExecute=Ot.canExecute(n)};insertLink(e){e.preventDefault();let{text:n,href:r,openInNewTab:o}=this.form.getRawValue(),{dispatch:s,state:l}=this.editorView,{selection:a}=l,c;this.options.showOpenInNewTab&&(c=o?"_blank":"_self");let p={title:r,href:r,target:c};a.empty?(Ot.insert(n,p)(l,s),this.editorView.focus()):Ot.update(p)(l,s),this.hidePopup()}ngOnInit(){this.editorView=this.menuService.editor.view,this.form=new An({href:new Pe("",[Xe.required,Xe.pattern(this.menuService.editor.linkValidationPattern)]),text:new Pe("",[Xe.required]),openInNewTab:new Pe(!0)}),this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||i)(S(qe),S(Ne),S(Te))};static \u0275cmp=O({type:i,selectors:[["ngx-link"]],hostBindings:function(n,r){n&1&&D("mousedown",function(s){return r.onDocumentClick(s)},ue)},inputs:{options:[2,"options","options",e=>P(P({},Ko),e)]},decls:5,vars:16,consts:[["type","button","aria-haspopup","dialog",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel","ariaExpanded"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"ngSubmit","formGroup"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label",3,"htmlFor"],["type","url","formControlName","href","autocomplete","off",3,"id"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","text","autocomplete","off",3,"id"],["class","NgxEditor__Popup--FormGroup",4,"ngIf"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"],["type","checkbox","formControlName","openInNewTab"]],template:function(n,r){n&1&&(x(0,"button",0),M(1,"sanitizeHtml"),M(2,"async"),M(3,"async"),D("mousedown",function(s){return r.onTogglePopupMouseClick(s)})("keydown.enter",function(){return r.onTogglePopupKeydown()})("keydown.space",function(){return r.onTogglePopupKeydown()}),w(),T(4,ha,20,18,"div",1)),n&2&&(Re("NgxEditor__MenuItem--Active",r.isActive||r.showPopup)("NgxEditor--Disabled",!r.canExecute),h("disabled",!r.canExecute)("innerHTML",I(1,10,r.icon),Oe)("title",I(2,12,r.title))("ariaLabel",I(3,14,r.title))("ariaExpanded",r.showPopup),f(4),h("ngIf",r.showPopup))},dependencies:[_e,H,U,Dt,gt,ft,fr,ht,mt,Pn,Dn,Me],encapsulation:2})}return i})(),Xc=(()=>{class i{ngxeService;menuService;toolbarItem;get name(){return this.toolbarItem}html;editorView;isActive=!1;disabled=!1;updateSubscription;constructor(e,n){this.ngxeService=e,this.menuService=n}toggle(){let{state:e,dispatch:n}=this.editorView;lt[this.name].toggle()(e,n)}onMouseClick(e){e.preventDefault(),e.button===0&&this.toggle()}onKeydown(){this.toggle()}update=e=>{let{state:n}=e,r=lt[this.name];this.isActive=r.isActive(n),this.disabled=!r.canExecute(n)};getTitle(e){return this.ngxeService.locals.get(e)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||i)(S(Ne),S(Te))};static \u0275cmp=O({type:i,selectors:[["ngx-toggle-command"]],inputs:{toolbarItem:"toolbarItem"},decls:4,vars:14,consts:[["type","button",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"]],template:function(n,r){n&1&&(ie(0,"button",0),M(1,"sanitizeHtml"),M(2,"async"),M(3,"async"),On("mousedown",function(s){return r.onMouseClick(s)})("keydown.enter",function(){return r.onKeydown()})("keydown.space",function(){return r.onKeydown()}),re()),n&2&&(Re("NgxEditor__MenuItem--Active",r.isActive)("NgxEditor--Disabled",r.disabled),Nn("disabled",r.disabled)("innerHTML",I(1,8,r.html),Oe)("title",I(2,10,r.getTitle(r.name)))("ariaLabel",I(3,12,r.getTitle(r.name))))},dependencies:[_e,Me],encapsulation:2})}return i})();var Qc=[["bold","italic"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"]];var Yc=["#b60205","#d93f0b","#fbca04","#0e8a16","#006b75","#1d76db","#0052cc","#5319e7","#e99695","#f9d0c4","#fef2c0","#c2e0c6","#bfdadc","#c5def5","#bfd4f2","#d4c5f9"],Zc=(()=>{class i{menuService;toolbar=Qc;colorPresets=Yc;disabled=!1;editor;customMenuRef=null;dropdownPlacement="bottom";toggleCommands=["bold","italic","underline","strike","code","blockquote","ordered_list","bullet_list","align_left","align_center","align_right","align_justify","superscript","subscript"];insertCommands=["horizontal_rule","format_clear","indent","outdent","undo","redo"];iconContainerClass=["NgxEditor__MenuItem","NgxEditor__MenuItem--IconContainer"];dropdownContainerClass=["NgxEditor__Dropdown"];seperatorClass=["NgxEditor__Seperator"];constructor(e){this.menuService=e}get presets(){let n=[];return this.colorPresets.forEach((r,o)=>{let s=Math.floor(o/8);n[s]||n.push([]),n[s].push(r)}),n}trackByIndex(e){return e}isDropDown(e){return!!e?.heading}getDropdownItems(e){return e}isLinkItem(e){return e==="link"?!0:typeof e=="object"&&typeof e?.link=="object"}isLinkWithOptions(e){return typeof e=="object"&&typeof e?.link=="object"}getLinkOptions(e){return e?.link}ngOnInit(){if(!this.editor)throw new vt("Required editor instance to initialize menu component");this.menuService.editor=this.editor}static \u0275fac=function(n){return new(n||i)(S(Te))};static \u0275cmp=O({type:i,selectors:[["ngx-editor-menu"]],inputs:{toolbar:"toolbar",colorPresets:"colorPresets",disabled:"disabled",editor:"editor",customMenuRef:"customMenuRef",dropdownPlacement:"dropdownPlacement"},features:[Rn([Te])],decls:3,vars:7,consts:[[1,"NgxEditor__MenuBar",3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"toolbarItem","class",4,"ngIf"],[3,"class",4,"ngIf"],["type","text_color",3,"class","presets",4,"ngIf"],["type","background_color",3,"class","presets",4,"ngIf"],[3,"toolbarItem"],[3,"options"],[3,"class","group","items",4,"ngFor","ngForOf","ngForTrackBy"],[3,"group","items"],["type","text_color",3,"presets"],["type","background_color",3,"presets"],[3,"ngTemplateOutlet"]],template:function(n,r){n&1&&(x(0,"div",0),T(1,Ea,2,2,"ng-container",1)(2,Ma,2,1,"ng-container",2),w()),n&2&&(h("ngClass",ut(4,ma,r.disabled,r.dropdownPlacement==="top")),f(),h("ngForOf",r.toolbar)("ngForTrackBy",r.trackByIndex),f(),h("ngIf",r.customMenuRef))},dependencies:[H,be,Ae,U,nr,ir,Yo,Zo,Xc,Gc,ts,es],encapsulation:2})}return i})(),ns=(()=>{class i{sanitizeHTML;ngxeService;constructor(e,n){this.sanitizeHTML=e,this.ngxeService=n}get view(){return this.editor.view}editor;updateSubscription;execulableItems=[];activeItems=[];toolbar=[["bold","italic","underline","strike"],["ordered_list","bullet_list","blockquote","code"],["align_left","align_center","align_right","align_justify"]];toggleCommands=["bold","italic","underline","strike","ordered_list","bullet_list","blockquote","code","align_left","align_center","align_right","align_justify"];getIcon(e){return this.sanitizeHTML.transform(this.ngxeService.getIcon(e))}getTitle(e){return this.ngxeService.locals.get(e)}trackByIndex(e){return e}onClick(e,n){if(e.preventDefault(),e.stopPropagation(),e.button!==0)return;let{state:r,dispatch:o}=this.view;lt[n].toggle()(r,o)}update(e){this.activeItems=[],this.execulableItems=[];let{state:n}=e;this.toggleCommands.forEach(r=>{let o=lt[r];o.isActive(n)&&this.activeItems.push(r),o.canExecute(n)&&this.execulableItems.push(r)})}ngOnInit(){this.updateSubscription=this.editor.update.subscribe(e=>{this.update(e)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||i)(S(Me),S(Ne))};static \u0275cmp=O({type:i,selectors:[["ngx-bubble"]],inputs:{editor:"editor"},features:[Rn([Me])],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["type","button","class","NgxBubbleMenu__Icon",3,"ngClass","title","innerHTML","mousedown",4,"ngIf"],["class","NgxBubbleMenu__Seperator",4,"ngIf"],["type","button",1,"NgxBubbleMenu__Icon",3,"mousedown","ngClass","title","innerHTML"],[1,"NgxBubbleMenu__Seperator"]],template:function(n,r){n&1&&T(0,Ra,2,2,"ng-container",0),n&2&&h("ngForOf",r.toolbar)("ngForTrackBy",r.trackByIndex)},dependencies:[_e,H,be,Ae,U],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}[_nghost-%COMP%]{display:flex;flex-wrap:wrap;background-color:var(--ngx-editor-bubble-bg-color);color:var(--ngx-editor-bubble-text-color);padding:5px;border-radius:4px}.NgxBubbleMenu__Icon[_ngcontent-%COMP%]{all:unset;appearance:none;height:var(--ngx-editor-icon-size);width:var(--ngx-editor-icon-size);transition:.2s ease-in-out;border-radius:var(--ngx-editor-menu-item-border-radius);display:flex;align-items:center;justify-content:center;color:#fff}.NgxBubbleMenu__Icon[_ngcontent-%COMP%]:hover{background-color:var(--ngx-editor-bubble-item-hover-color)}.NgxBubbleMenu__Icon[_ngcontent-%COMP%] + .NgxBubbleMenu__Icon[_ngcontent-%COMP%]{margin-left:5px}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active[_ngcontent-%COMP%]{background-color:var(--ngx-editor-bubble-text-color);color:var(--ngx-editor-bubble-bg-color)}.NgxBubbleMenu__Seperator[_ngcontent-%COMP%]{border-left:1px solid var(--ngx-editor-seperator-color);margin:0 5px}"]})}return i})(),ep=(()=>{class i{el;constructor(e){this.el=e}get display(){return{visibility:this.showMenu?"visible":"hidden",opacity:this.showMenu?"1":"0",top:`${this.posTop}px`,left:`${this.posLeft}px`}}get view(){return this.editor.view}editor;autoPlace=!1;posLeft=0;posTop=0;showMenu=!1;updateSubscription;dragging=!1;resizeSubscription;onMouseDown(e){let n=e.target;if(this.el.nativeElement.contains(n)&&n.nodeName!=="INPUT"){e.preventDefault();return}this.dragging=!0}onKeyDown(e){e.target.nodeName!=="INPUT"&&(this.dragging=!0,this.hide())}onMouseUp(e){let n=e.target;if(this.el.nativeElement.contains(n)||n.nodeName==="INPUT"){e.preventDefault();return}this.dragging=!1,this.useUpdate()}onKeyUp(e){e.target.nodeName!=="INPUT"&&(this.dragging=!1,this.useUpdate())}useUpdate(){this.view&&this.update(this.view)}hide(){this.showMenu=!1}show(){this.showMenu=!0}calculateBubblePosition(e){return ne(this,null,function*(){let{state:{selection:n}}=e,{from:r,to:o}=n,s=e.coordsAtPos(r),l=e.coordsAtPos(o),a={getBoundingClientRect(){if(n instanceof A)return e.nodeDOM(r).getBoundingClientRect();let{top:d,left:g}=s,{bottom:v,right:_}=l;return{x:g,y:d,top:d,bottom:v,left:g,right:_,width:_-g,height:v-d}}},c=this.el.nativeElement,{x:p,y:u}=yield $o(a,c,{placement:"top",middleware:[Ho(5),this.autoPlace&&Vo({boundary:e.dom,padding:5,allowedPlacements:["top","bottom"]}),{name:"overflowMiddleware",fn(d){return ne(this,null,function*(){let g=yield Bo(d,{boundary:e.dom,padding:5});return g.left>0?{x:d.x+g.left}:g.right>0?{x:d.x-g.right}:{}})}}].filter(Boolean)});return{left:p,top:u}})}canShowMenu(e){let{state:n}=e,{selection:r}=n,{empty:o}=r;return r instanceof A&&r.node.type.name==="image"?!1:!this.view.hasFocus()||o||this.dragging?(this.hide(),!1):!0}update(e){if(!this.canShowMenu(e)){this.hide();return}this.calculateBubblePosition(this.view).then(({top:r,left:o})=>{if(!this.canShowMenu){this.hide();return}this.posLeft=o,this.posTop=r,this.show()})}ngOnInit(){if(!this.editor)throw new vt("Required editor instance to initialize floating menu component");this.updateSubscription=this.editor.update.subscribe(e=>{this.update(e)}),this.resizeSubscription=Ri(window,"resize").pipe(Di(500,Ni,{leading:!0,trailing:!0})).subscribe(()=>{this.useUpdate()})}ngOnDestroy(){this.updateSubscription.unsubscribe(),this.resizeSubscription.unsubscribe()}static \u0275fac=function(n){return new(n||i)(S(qe))};static \u0275cmp=O({type:i,selectors:[["ngx-editor-floating-menu"]],hostVars:2,hostBindings:function(n,r){n&1&&D("mousedown",function(s){return r.onMouseDown(s)},ue)("keydown",function(s){return r.onKeyDown(s)},ue)("mouseup",function(s){return r.onMouseUp(s)},ue)("keyup",function(s){return r.onKeyUp(s)},ue),n&2&&Xi(r.display)},inputs:{editor:"editor",autoPlace:"autoPlace"},ngContentSelectors:ea,decls:4,vars:1,consts:[["ref",""],[4,"ngIf"],[3,"editor"]],template:function(n,r){if(n&1&&(ji(),x(0,"div",null,0),Wi(2),w(),T(3,Aa,2,1,"ng-container",1)),n&2){let o=Ki(1);f(3),h("ngIf",o.children.length===0)}},dependencies:[ns,H,U],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}[_nghost-%COMP%]{position:absolute;z-index:20;margin-bottom:5px;visibility:hidden;opacity:0}"]})}return i})(),tp=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=Mn({type:i});static \u0275inj=En({providers:[Me],imports:[H,Dt,Zc,ts,Zo,es,Yo,ep,ns]})}return i})(),mn=new zi("NgxEditorConfig"),Go={locals:yi,icons:Qo},is=(()=>{class i{static forRoot(e=Go){return{ngModule:i,providers:[{provide:mn,useValue:e},{provide:Ci,useFactory:qo,deps:[mn]}]}}static forChild(e=Go){return{ngModule:i,providers:[{provide:mn,useValue:e},{provide:Ci,useFactory:qo,deps:[mn]},Ne]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=Mn({type:i});static \u0275inj=En({imports:[H,tp,za]})}return i})();var zd=typeof navigator<"u"?/Mac/.test(navigator.platform):!1;function np(i,t){if(i&1&&(x(0,"div",1)(1,"span",2),b(2),w(),x(3,"span",3),b(4),w()()),i&2){let e=y();h("ngClass",e.toastColor),f(2),V(e.icon),f(2),V(e.message)}}var vn=class i{message="";type="info";show=!1;get toastColor(){switch(this.type){case"success":return"bg-green-600";case"error":return"bg-red-600";case"warning":return"bg-yellow-600 text-black";case"info":default:return"bg-blue-600"}}get icon(){switch(this.type){case"success":return"\u2714\uFE0F";case"error":return"\u274C";case"warning":return"\u26A0\uFE0F";case"info":default:return"\u2139\uFE0F"}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=O({type:i,selectors:[["app-toastr"]],inputs:{message:"message",type:"type",show:"show"},decls:1,vars:1,consts:[["class","fixed bottom-6 right-6 text-white px-4 py-3 rounded-xl shadow-xl flex items-center gap-3 z-50 transition-all duration-300",3,"ngClass",4,"ngIf"],[1,"fixed","bottom-6","right-6","text-white","px-4","py-3","rounded-xl","shadow-xl","flex","items-center","gap-3","z-50","transition-all","duration-300",3,"ngClass"],[1,"text-lg"],[1,"text-sm"]],template:function(e,n){e&1&&T(0,np,5,3,"div",0),e&2&&h("ngIf",n.show)},dependencies:[H,be,U],styles:["[_nghost-%COMP%]{transition:opacity .3s ease-in-out}"]})};function ip(i,t){i&1&&(x(0,"div",1),N(1,"img",2),x(2,"p",3),b(3,"LOCKING TARGET..."),w()())}var yn=class i{constructor(t){this.loadingService=t;this.loadingService.loading$.subscribe(e=>{this.loading=e})}loading=!1;static \u0275fac=function(e){return new(e||i)(S(Qe))};static \u0275cmp=O({type:i,selectors:[["app-loading-snipper"]],decls:1,vars:1,consts:[["class","fixed inset-0 z-[9999] flex flex-col items-center justify-center bg-black/80 text-neon-green font-mono",4,"ngIf"],[1,"fixed","inset-0","z-[9999]","flex","flex-col","items-center","justify-center","bg-black/80","text-neon-green","font-mono"],["src","snipperMan.png","alt","SnipperMan",1,"w-40","h-40","animate-pulse","drop-shadow-[0_0_15px_#00FF00]"],[1,"mt-4","text-xl","animate-glitch","tracking-widest"]],template:function(e,n){e&1&&T(0,ip,4,0,"div",0),e&2&&h("ngIf",n.loading)},dependencies:[H,U],encapsulation:2})};var bn=class i{constructor(t){this.toastService=t;this.toastService.toast$.subscribe(e=>{this.toastData=e})}title="LeakRadar";toastData={message:"",type:"info",show:!1};static \u0275fac=function(e){return new(e||i)(S(Ce))};static \u0275cmp=O({type:i,selectors:[["app-root"]],decls:6,vars:3,consts:[[3,"message","type","show"]],template:function(e,n){e&1&&(N(0,"app-sidebar"),x(1,"body"),N(2,"app-loading-snipper")(3,"app-toastr",0)(4,"router-outlet")(5,"app-footer"),w()),e&2&&(f(3),h("message",n.toastData.message)("type",n.toastData.type)("show",n.toastData.show))},dependencies:[ur,Bt,Ht,is,vn,yn],encapsulation:2})};rr(bn,yr).catch(i=>console.error(i));
